import{u as w,r as a,d as N,C as E,j as e,S}from"./index-BKMSpVWi.js";import{l as k}from"./lodash-CXZMCRKK.js";const D=n=>{const{apiBaseUrl:b,setApiBaseUrl:m}=w(),[g,c]=a.useState(""),[r,d]=a.useState([]),[p,o]=a.useState(!1),[i,f]=a.useState(0);a.useEffect(()=>{n.input&&(c(n.input),o(!1))},[n]),a.useEffect(()=>{if(r.organizations||r.authorities||r.categories){const s=(r.organizations?.length||0)+(r.authorities?.length||0)+(r.categories?.length||0);f(s)}},[r]);const y=s=>{c(s),h(s)},j=s=>{n.searchHandler(s),c(s),o(!1)},h=k.debounce(async s=>{if(!s){d([]),o(!1);return}try{const t=await N.get(`${b}/api/search/`,{params:{q:s}});d(t.data.suggestions),o(!0),console.log(t.data.suggestions)}catch(t){if(console.error("Error fetching suggestions:",t),t.response||t.request)if(t.response&&t.response.status>=500&&t.response.status<600||t.code==="ECONNREFUSED"||t.code==="ETIMEDOUT"||t.code==="ENOTFOUND"||t.code==="ERR_NETWORK"){const l=await E();m(l),setTimeout(()=>h(),1e3)}else console.error("Error fetching state count:",t);else console.error("Error fetching state count:",t)}},600),u=({title:s,items:t,itemKey:l})=>!t||t.length===0?null:e.jsxs("div",{className:"mb-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm font-semibold text-gray-500 px-3 py-2 bg-gray-50 sticky top-0",children:[e.jsx("span",{children:s}),e.jsx("span",{className:"bg-gray-200 text-gray-600 px-2 py-0.5 rounded-full text-xs",children:t.length})]}),e.jsx("div",{className:"custom-scrollbar",children:t.map((x,v)=>e.jsx("div",{onClick:()=>j(x[l]),className:"px-4 py-2.5 hover:bg-blue-50 cursor-pointer text-gray-700 text-sm transition-colors duration-150",children:x[l]},v))})]});return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"relative w-full max-w-xl mx-auto",children:[e.jsx("style",{children:`
          .custom-scrollbar::-webkit-scrollbar {
            width: 4px; /* Width of the scrollbar */
          }

          .custom-scrollbar::-webkit-scrollbar-thumb {
            background-color: #888; /* Scrollbar thumb color */
            border-radius: 4px; /* Rounded corners */
            }
            
            .custom-scrollbar::-webkit-scrollbar-thumb:hover {
              background-color: #555; /* Thumb color on hover */
          }

          .custom-scrollbar::-webkit-scrollbar-track {
            background: transparent; /* Scrollbar track background */
            }
            `}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-3 flex items-center pointer-events-none",children:e.jsx(S,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"text",value:g,onChange:s=>y(s.target.value),onKeyDown:s=>{s.key==="Enter"&&(n.searchHandler(s.target.value),s.preventDefault())},className:"w-full pl-10 pr-4 py-2.5 rounded-lg border border-gray-200 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 outline-none text-gray-700",placeholder:"Search Authority, Exams...",autoComplete:"off",onFocus:()=>g&&o(!0),onBlur:()=>setTimeout(()=>o(!1),1e3)}),p&&e.jsxs("div",{className:"custom-scrollbar max-h-72 overflow-auto absolute left-0 right-0 top-full mt-1 bg-white border border-gray-200 rounded shadow-lg z-50",children:[i>0&&e.jsxs("div",{className:"px-3 py-2 bg-gray-100 border-b border-gray-200 text-xs text-gray-500",children:["Found ",i," total matches"]}),e.jsxs("div",{className:"",children:[r.authorities?.length>0&&e.jsx(u,{title:"States",items:r.authorities,itemKey:"name"}),r.organizations?.length>0&&e.jsx(u,{title:"Organizations",items:r.organizations,itemKey:"abbreviation"}),r.categories?.length>0&&e.jsx(u,{title:"Categories",items:r.categories,itemKey:"category"}),!i&&e.jsx("div",{className:"px-4 py-3 text-sm text-gray-500",children:"No suggestions found"})]})]})]})]})})};export{D as default};
