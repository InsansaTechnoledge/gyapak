import{a as f,r as a,u as j,e as v,j as e,R as y,H as E,b as N,g as k}from"./index-PLu6uRG2.js";import"./pdf.worker-D6-XlEtG.js";const R=()=>{const{apiBaseUrl:u,setApiBaseUrl:p,setServerError:x}=f(),[n,i]=a.useState(),[c,t]=a.useState(""),[o,l]=a.useState(!1),g=j(),b=v(),r=new URLSearchParams(b.search).get("token");a.useEffect(()=>{r||m()},[r]);const d=async()=>{if(!r){t("Invalid or missing token.");return}l(!0),t("");try{const s=await N.post(`${u}/api/subscriber/unsubscribe`,{token:r});s.status===201||s.status===202?i(s.data):t(s.data.message||"An error occurred. Please try again.")}catch(s){if(console.error("Error unsubscribing:",s),s.response||s.request)if(s.response&&s.response.status>=500&&s.response.status<600||s.code==="ECONNREFUSED"||s.code==="ETIMEDOUT"||s.code==="ENOTFOUND"||s.code==="ERR_NETWORK"){const h=await k();p(h),x(s.response.status),setTimeout(()=>d(),1e3)}else console.error("Error fetching state count:",s);else console.error("Error fetching state count:",s);s.response?t(s.response.data.message||"An error occurred. Please try again."):t("An error occurred. Please try again.")}finally{l(!1)}},m=()=>{g("/")};return r?e.jsxs(e.Fragment,{children:[e.jsxs(E,{children:[e.jsx("title",{children:"gyapak"}),e.jsx("meta",{name:"description",content:"gyapak.in is a trusted source for the latest government exam updates, including exam dates, notifications, admit cards, and results for both central and state government departments. Stay updated with real-time information on competitive exams, application deadlines, and result announcements!"}),e.jsx("meta",{name:"keywords",content:"government competitive exams after 12th,government organisations, exam sarkari results, government calendar,current affairs,top exams for government jobs in india,Upcoming Government Exams"}),e.jsx("meta",{property:"og:title",content:"gyapak"}),e.jsx("meta",{property:"og:description",content:"Find the latest updates on government exams, admit cards, results, and application deadlines for central and state government jobs."})]}),e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-white text-gray-800",children:[e.jsx("h1",{className:"text-6xl font-bold text-purple-500 mb-4",children:"Unsubscribe"}),n?e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"text-2xl font-semibold mb-4",children:n}),e.jsx("p",{className:"text-lg mb-6",children:"You will no longer receive updates."})]}):e.jsxs(e.Fragment,{children:[c?e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"text-2xl font-semibold mb-4 text-red-500",children:"Error"}),e.jsx("p",{className:"text-lg mb-6 text-red-500",children:c})]}):e.jsx("p",{className:"text-lg mb-6",children:"Click the button below to confirm your unsubscribe request."}),!n&&e.jsx("button",{onClick:d,disabled:o,className:`px-4 py-2 ${o?"bg-gray-500 cursor-not-allowed":"bg-purple-500 hover:bg-purple-600"} text-white rounded-lg transition-all`,children:o?"Processing...":"Unsubscribe"})]}),e.jsx("div",{className:"flex space-x-4 mt-6",children:e.jsx("button",{onClick:m,className:"px-4 py-2 bg-purple-500 hover:bg-purple-600 text-white rounded-lg transition-all",children:"Go to Home"})})]})]}):e.jsx("div",{className:"w-full h-screen flex justify-center",children:e.jsx(y,{size:60,color:"#5B4BEA",speedMultiplier:2,className:"my-auto"})})};export{R as default};
