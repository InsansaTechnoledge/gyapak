import{e as y,r as d,u as G,j as e,H as X,S as K}from"./index-L8TNVAEw.js";import{f as Q,a as Z,b as ee,c as te}from"./currentAffairService-BAy0Zmho.js";import{X as se}from"./x-DNbfmy5X.js";import{T as z}from"./triangle-alert-d5-yjdkq.js";import{C as D}from"./clock-BEAeRWKm.js";import{T as F}from"./tag-CrTEsh0O.js";import{E as U}from"./external-link-BX21mhAe.js";import{C as ae}from"./calendar-Bum2uu71.js";import{B as re}from"./book-open-Ds-hvC8R.js";import"./pdf.worker-D6-XlEtG.js";/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=y("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=y("Film",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 3v18",key:"bbkbws"}],["path",{d:"M3 7.5h4",key:"zfgn84"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 16.5h4",key:"1230mu"}],["path",{d:"M17 3v18",key:"in4fa5"}],["path",{d:"M17 7.5h4",key:"myr1c1"}],["path",{d:"M17 16.5h4",key:"go4c1d"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=y("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E=y("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]),L=(o,u=200)=>o&&(o.length>u?o.substring(0,u)+"...":o).split(`
`).map(n=>n.trim()).filter(n=>n).map((n,g)=>n.startsWith("•")||n.startsWith("-")||n.startsWith("*")?e.jsxs("div",{className:"flex items-start mb-1",children:[e.jsx("span",{className:"text-blue-600 mr-2 mt-0.5 text-sm",children:"•"}),e.jsx("span",{className:"text-sm",children:n.substring(1).trim()})]},g):e.jsx("div",{className:"mb-1 text-sm",children:n},g));function be(){const[o,u]=d.useState([]),[m,h]=d.useState(""),[n,g]=d.useState(""),[f,Y]=d.useState(""),[N,I]=d.useState(""),[w,H]=d.useState(""),[O,ce]=d.useState(!1),[W,k]=d.useState(!0),[j,q]=d.useState("all"),[A,T]=d.useState(null),B=G(),C=t=>{const s=t.date?.split("T")[0],i=t.title?.toLowerCase().replace(/\s+/g,"-");B(`/current-affairs/${s}/${i}`)},b=async(t=j)=>{k(!0),T(null);try{let s;switch(t){case"today":s=await te();break;case"monthly":{const l=new Date,c=n||l.getMonth()+1,x=f||l.getFullYear();s=await ee(c,x);break}case"yearly":{const l=new Date().getFullYear();s=await Z(f||l);break}case"all":default:s=await Q();break}const i=Array.isArray(s.data)?s.data:[];let a=[];i.forEach(l=>{Array.isArray(l.affairs)&&l.affairs.length>0&&l.affairs.forEach(c=>{a.push({...c,date:l.date,mediaType:c.videoUrl?"video":c.imageUrl?"image":"text",mediaUrl:c.videoUrl||c.imageUrl||null})})}),t==="all"&&a.sort((l,c)=>new Date(c.date)-new Date(l.date)),u(a)}catch{T("Failed to load current affairs. Please try again later.")}finally{k(!1)}};d.useEffect(()=>{b()},[]),[...new Set(o.map(t=>t.category))],[...new Set(o.map(t=>t.date?.split("-")[0]))];const J=["January","February","March","April","May","June","July","August","September","October","November","December"],v=t=>new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),P=t=>{q(t),b(t)},$=()=>{b(j)},S=t=>{switch(t){case"image":return e.jsx(ie,{size:16});case"video":return e.jsx(ne,{size:16});case"audio":return e.jsx(E,{size:16});case"text":default:return e.jsx(re,{size:16})}},p=o.filter(t=>{const s=m===""||t.title?.toLowerCase().includes(m.toLowerCase())||t.content?.toLowerCase().includes(m.toLowerCase()),i=N===""||t.category===N,a=f===""||t.date?.startsWith(f),l=n===""||t.date?.split("-")[1]===String(J.findIndex(x=>x===n)+1).padStart(2,"0"),c=w===""||t.mediaType===w;return s&&i&&a&&l&&c}).sort((t,s)=>new Date(s.date)-new Date(t.date)),M=p.reduce((t,s)=>{const i=s.date?.split("T")[0];return t[i]||(t[i]=[]),t[i].push(s),t},{}),R=Object.keys(M).sort((t,s)=>new Date(s)-new Date(t)),V=()=>{I(""),Y(""),g(""),H(""),h("")},_=t=>{if(!t.mediaUrl)return null;switch(t.mediaType){case"image":return e.jsx("div",{className:"mb-4 relative rounded-lg overflow-hidden bg-gray-100",children:e.jsx("img",{src:t.mediaUrl||"/api/placeholder/800/450",alt:t.title,className:"w-full h-auto object-contain max-h-64",onError:s=>{s.target.src="/api/placeholder/800/450",s.target.alt="Image unavailable"}})});case"video":return e.jsx("div",{className:"mb-4 relative aspect-video rounded-lg overflow-hidden",children:e.jsx("video",{src:t.mediaUrl,className:"w-full h-full object-cover",controls:!0,poster:"/api/placeholder/800/450",children:"Your browser does not support the video tag."})});case"audio":return e.jsxs("div",{className:"mb-4 bg-purple-50 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx(E,{className:"text-purple-700 mr-2"}),e.jsx("span",{className:"text-purple-800 font-medium",children:"Audio Content"})]}),e.jsxs("audio",{controls:!0,className:"w-full",children:[e.jsx("source",{src:t.mediaUrl}),"Your browser does not support the audio element."]})]});default:return null}},r=(()=>{if(p.length===0)return null;const t=[...p].sort((a,l)=>new Date(l.date)-new Date(a.date)),s=t.filter(a=>a.mediaType==="image"||a.mediaType==="video");return(s.length>0?s:t)[0]})();return r&&p.filter(t=>t!==r),e.jsxs(e.Fragment,{children:[e.jsxs(X,{children:[e.jsx("title",{children:"Current Affairs"}),e.jsx("meta",{name:"description",content:"gyapak.in is a trusted source for the latest government exam updates, including exam dates, notifications, admit cards, and results for both central and state government departments. Stay updated with real-time information on competitive exams, application deadlines, and result announcements!"}),e.jsx("meta",{name:"keywords",content:"government competitive exams after 12th,government organisations, exam sarkari results, government calendar,current affairs,top exams for government jobs in india,Upcoming Government Exams"}),e.jsx("meta",{property:"og:title",content:"gyapak"}),e.jsx("meta",{property:"og:description",content:"Find the latest updates on government exams, admit cards, results, and application deadlines for central and state government jobs."})]}),e.jsxs("div",{className:"min-h-screen px-2 sm:px-4",children:[e.jsx("header",{className:"bg-white  pt-32 mx-auto ",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex-1 text-center md:text-left",children:[e.jsxs("h1",{className:"text-5xl font-bold text-purple-800 mb-3 relative inline-block",children:[e.jsx("span",{className:"relative z-10",children:"Current Affairs"}),e.jsx("span",{className:"absolute -bottom-2 left-0 w-full h-2 bg-purple-200 transform -rotate-1 rounded z-0"})]}),e.jsxs("p",{className:"text-lg text-gray-600 mt-1 max-w-xl mx-auto md:mx-0",children:["Curated headlines & insights from ",e.jsx("span",{className:"text-purple-700 font-semibold",children:"gyapak"}),"."]})]}),e.jsxs("div",{className:"relative w-full max-w-md hidden md:block",children:[e.jsx("input",{type:"text",placeholder:"Search current affairs...",className:"w-full pl-10 pr-10 py-2  rounded-full shadow-sm focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition",value:m,onChange:t=>h(t.target.value)}),e.jsx(K,{className:"absolute left-3 top-2.5 text-gray-400 w-5 h-5"}),m&&e.jsx("button",{className:"absolute right-3 top-2.5 text-gray-400 hover:text-gray-600",onClick:()=>h(""),children:e.jsx(se,{size:16})})]})]}),e.jsx("div",{className:"mt-5 flex flex-wrap gap-4 border-t border-gray-100 pt-4",children:["all","today","monthly","yearly"].map(t=>e.jsxs("button",{className:`px-4 py-2 text-sm font-medium rounded-full transition ${j===t?"bg-purple-100 text-purple-800 shadow-sm":"text-gray-600 hover:text-purple-600 hover:bg-gray-100"}`,onClick:()=>P(t),children:[t==="all"&&"All Affairs",t==="today"&&"Today's Highlights",t==="monthly"&&"Monthly Archive",t==="yearly"&&"Yearly Archive"]},t))}),O&&e.jsx("div",{className:"mt-4"})]})}),e.jsxs("div",{className:"mt-4 text-sm text-gray-600 bg-purple-50 border border-purple-100 rounded-lg p-3 mb-8 flex items-center gap-2",children:[e.jsx(z,{className:"text-purple-500",size:18}),e.jsx("span",{children:"Click on any card to view probable questions and full details of the current affair."})]}),e.jsx("main",{className:"container mx-auto px-4  pb-12",children:W?e.jsx("div",{className:"flex justify-center py-20",children:e.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-sm pt-28 text-center",children:[e.jsx("div",{className:"animate-spin w-12 h-12 border-4 border-purple-300 border-t-purple-600 rounded-full mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading current affairs..."})]})}):A?e.jsxs("div",{className:"bg-red-50 p-6 pt-48 rounded-lg text-center",children:[e.jsx(z,{size:48,className:"mx-auto text-red-500 mb-4"}),e.jsx("h3",{className:"text-xl font-medium text-red-800 mb-2",children:"Oops! Something went wrong"}),e.jsx("p",{className:"text-red-600 mb-4",children:A}),e.jsx("button",{className:"px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 font-medium",onClick:$,children:"Try Again"})]}):p.length>0?e.jsxs(e.Fragment,{children:[r&&e.jsx("div",{className:"mb-12",children:e.jsxs("div",{onClick:()=>C(r),className:"bg-white rounded-xl shadow-md overflow-hidden border border-gray-100",children:[r.mediaType==="image"&&r.mediaUrl&&e.jsxs("div",{className:"relative bg-gray-100 rounded-t-xl overflow-hidden",children:[e.jsx("img",{src:r.mediaUrl||"/api/placeholder/1200/400",alt:r.title,className:"w-full h-auto object-contain max-h-[420px]",onError:t=>{t.target.src="/api/placeholder/1200/400",t.target.alt="Image unavailable"}}),e.jsx("div",{className:"absolute top-4 left-4",children:e.jsx("span",{className:"bg-purple-600 text-white px-3 py-1 rounded-full text-sm font-medium",children:r.category})})]}),r.mediaType==="video"&&r.mediaUrl&&e.jsxs("div",{className:"relative aspect-video w-full",children:[e.jsx("video",{src:r.mediaUrl,className:"w-full h-full object-cover",controls:!0,poster:"/api/placeholder/1200/400",children:"Your browser does not support the video tag."}),e.jsx("div",{className:"absolute top-4 left-4",children:e.jsx("span",{className:"bg-purple-600 text-white px-3 py-1 rounded-full text-sm font-medium",children:r.category})})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center text-sm text-gray-500 mb-3",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx(D,{size:14,className:"mr-1"}),v(r.date)]}),r.mediaType&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"mx-2",children:"•"}),e.jsxs("span",{className:"flex items-center",children:[S(r.mediaType),e.jsx("span",{className:"ml-1",children:r.mediaType.charAt(0).toUpperCase()+r.mediaType.slice(1)})]})]})]}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-3 hover:text-purple-700 transition-colors",children:r.title}),e.jsx("div",{className:"text-gray-700 mb-5 leading-relaxed text-lg",children:L(r.content,400)}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-5",children:r.tags?.map((t,s)=>e.jsxs("span",{className:"inline-flex items-center text-xs text-purple-600 bg-purple-50 px-3 py-1 rounded-full",children:[e.jsx(F,{size:12,className:"mr-1"}),t]},s))}),r.source&&e.jsxs("div",{className:"flex items-center text-sm text-purple-600 hover:text-purple-800",children:[e.jsx(U,{size:14,className:"mr-1"}),e.jsxs("a",{href:r.source,target:"_blank",rel:"noopener noreferrer",className:"hover:underline",children:["Source: ",r.source.replace(/(^\w+:|^)\/\//,"").split("/")[0]]})]})]})]})}),R.map(t=>{const i=M[t].filter(a=>a!==r);return i.length===0?null:e.jsxs("div",{className:"mb-10",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-purple-100 flex items-center justify-center mr-3",children:e.jsx(ae,{className:"text-purple-700",size:20})}),e.jsx("h2",{className:"text-lg font-bold text-purple-800",children:v(t)})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:i.map((a,l)=>e.jsx("article",{onClick:()=>C(a),className:"bg-white rounded-xl shadow-sm hover:shadow-md transition-shadow overflow-hidden border border-gray-100",children:e.jsxs("div",{className:"p-6",children:[_(a),e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("span",{className:"bg-purple-100 text-purple-700 px-3 py-1 rounded-full text-sm font-medium",children:a.category}),e.jsxs("div",{className:"flex gap-2 items-center",children:[a.mediaType&&e.jsxs("span",{className:"flex items-center text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded",children:[S(a.mediaType),e.jsx("span",{className:"ml-1",children:a.mediaType.charAt(0).toUpperCase()+a.mediaType.slice(1)})]}),e.jsxs("span",{className:"flex items-center text-sm text-gray-500",children:[e.jsx(D,{size:14,className:"mr-1"}),v(a.date)]})]})]}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3 hover:text-purple-700 transition-colors",children:a.title}),e.jsx("div",{className:"text-gray-700 mb-5 leading-relaxed",children:e.jsx("div",{className:"line-clamp-3",children:L(a.content,150)})}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-5",children:a.tags&&a.tags.map((c,x)=>e.jsxs("span",{className:"inline-flex items-center text-xs text-purple-600 bg-purple-50 px-3 py-1 rounded-full",children:[e.jsx(F,{size:12,className:"mr-1"}),c]},x))}),a.source&&e.jsxs("div",{className:"flex items-center text-sm text-purple-600 hover:text-purple-800",children:[e.jsx(U,{size:14,className:"mr-1"}),e.jsxs("a",{href:a.source,target:"_blank",rel:"noopener noreferrer",className:"hover:underline",children:["Source: ",a.source.replace(/(^\w+:|^)\/\//,"").split("/")[0]]})]})]})},l))})]},t)})]}):e.jsx("div",{className:"flex justify-center py-20",children:e.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-sm text-center max-w-md",children:[e.jsx("div",{className:"w-16 h-16 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(le,{size:24,className:"text-purple-700"})}),e.jsx("h3",{className:"text-xl font-medium text-gray-800 mb-2",children:"No current affairs found"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Try adjusting your search or filters to find what you're looking for"}),e.jsx("button",{className:"px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 font-medium",onClick:V,children:"Clear Filters"})]})})})]})]})}export{be as default};
