import{e as j,r as o,u as G,j as e,H as X,S as K,B as Q}from"./index-Blcj_2Q4.js";import{f as Z,a as ee,b as te,c as se}from"./currentAffairService-DoWqPwsX.js";import{X as ae}from"./x-Bgq7tSLC.js";import{T as re}from"./triangle-alert-CUVnlb6z.js";import{C as D}from"./clock-bEArU7yT.js";import{T as F}from"./tag-D1RTrVn0.js";import{E as U}from"./external-link-BZY8wFBn.js";import{C as le}from"./calendar-DSVHOJ-8.js";import"./pdf.worker-D6-XlEtG.js";/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=j("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=j("Film",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 3v18",key:"bbkbws"}],["path",{d:"M3 7.5h4",key:"zfgn84"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 16.5h4",key:"1230mu"}],["path",{d:"M17 3v18",key:"in4fa5"}],["path",{d:"M17 7.5h4",key:"myr1c1"}],["path",{d:"M17 16.5h4",key:"go4c1d"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=j("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E=j("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]),L=(d,h=200)=>d&&(d.length>h?d.substring(0,h)+"...":d).split(`
`).map(i=>i.trim()).filter(i=>i).map((i,f)=>i.startsWith("•")||i.startsWith("-")||i.startsWith("*")?e.jsxs("div",{className:"flex items-start mb-1",children:[e.jsx("span",{className:"text-blue-600 mr-2 mt-0.5 text-sm",children:"•"}),e.jsx("span",{className:"text-sm",children:i.substring(1).trim()})]},f):e.jsx("div",{className:"mb-1 text-sm",children:i},f));function ve(){const[d,h]=o.useState([]),[m,g]=o.useState(""),[i,f]=o.useState(""),[y,Y]=o.useState(""),[N,I]=o.useState(""),[w,H]=o.useState(""),[O,oe]=o.useState(!1),[R,k]=o.useState(!0),[p,W]=o.useState("all"),[A,T]=o.useState(null),B=G(),C=o.useRef({}),S=t=>{const a=t.date?.split("T")[0],n=t.title?.toLowerCase().replace(/\s+/g,"-");B(`/current-affairs/${a}/${n}`)},v=async(t=p)=>{k(!0),T(null);try{let a;switch(t){case"today":a=await se();break;case"monthly":{const l=new Date,c=i||l.getMonth()+1,u=y||l.getFullYear();a=await te(c,u);break}case"yearly":{const l=new Date().getFullYear();a=await ee(y||l);break}case"all":a=await Z();break}const n=Array.isArray(a.data)?a.data:[];let s=[];n.forEach(l=>{Array.isArray(l.affairs)&&l.affairs.length>0&&l.affairs.forEach(c=>{s.push({...c,date:l.date,mediaType:c.videoUrl?"video":c.imageUrl?"image":"text",mediaUrl:c.videoUrl||c.imageUrl||null})})}),t==="all"&&s.sort((l,c)=>new Date(c.date)-new Date(l.date)),h(s)}catch{T("Failed to load current affairs. Please try again later.")}finally{k(!1)}};o.useEffect(()=>{v(),C.current[p].scrollIntoView({behavior:"smooth",inline:"center",block:"nearest"})},[p]),[...new Set(d.map(t=>t.category))],[...new Set(d.map(t=>t.date?.split("-")[0]))];const J=["January","February","March","April","May","June","July","August","September","October","November","December"],b=t=>new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),P=t=>{W(t),v(t)},V=()=>{v(p)},M=t=>{switch(t){case"image":return e.jsx(ce,{size:16});case"video":return e.jsx(ie,{size:16});case"audio":return e.jsx(E,{size:16});case"text":default:return e.jsx(Q,{size:16})}},x=d.filter(t=>{const a=m===""||t.title?.toLowerCase().includes(m.toLowerCase())||t.content?.toLowerCase().includes(m.toLowerCase()),n=N===""||t.category===N,s=y===""||t.date?.startsWith(y),l=i===""||t.date?.split("-")[1]===String(J.findIndex(u=>u===i)+1).padStart(2,"0"),c=w===""||t.mediaType===w;return a&&n&&s&&l&&c}).sort((t,a)=>new Date(a.date)-new Date(t.date)),z=x.reduce((t,a)=>{const n=a.date?.split("T")[0];return t[n]||(t[n]=[]),t[n].push(a),t},{}),$=Object.keys(z).sort((t,a)=>new Date(a)-new Date(t)),q=()=>{I(""),Y(""),f(""),H(""),g("")},_=t=>{if(!t.mediaUrl)return null;switch(t.mediaType){case"image":return e.jsx("div",{className:"mb-4 relative rounded-lg overflow-hidden bg-gray-100",children:e.jsx("img",{src:t.mediaUrl||"/api/placeholder/800/450",alt:t.title,className:"w-full h-auto object-contain max-h-64",onError:a=>{a.target.src="/api/placeholder/800/450",a.target.alt="Image unavailable"}})});case"video":return e.jsx("div",{className:"mb-4 relative aspect-video rounded-lg overflow-hidden",children:e.jsx("video",{src:t.mediaUrl,className:"w-full h-full object-cover",controls:!0,poster:"/api/placeholder/800/450",children:"Your browser does not support the video tag."})});case"audio":return e.jsxs("div",{className:"mb-4 bg-purple-50 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx(E,{className:"text-purple-700 mr-2"}),e.jsx("span",{className:"text-purple-800 font-medium",children:"Audio Content"})]}),e.jsxs("audio",{controls:!0,className:"w-full",children:[e.jsx("source",{src:t.mediaUrl}),"Your browser does not support the audio element."]})]});default:return null}},r=(()=>{if(x.length===0)return null;const t=[...x].sort((s,l)=>new Date(l.date)-new Date(s.date)),a=t.filter(s=>s.mediaType==="image"||s.mediaType==="video");return(a.length>0?a:t)[0]})();return r&&x.filter(t=>t!==r),e.jsxs(e.Fragment,{children:[e.jsxs(X,{children:[e.jsx("title",{children:"Current Affairs"}),e.jsx("meta",{name:"description",content:"gyapak.in is a trusted source for the latest government exam updates, including exam dates, notifications, admit cards, and results for both central and state government departments. Stay updated with real-time information on competitive exams, application deadlines, and result announcements!"}),e.jsx("meta",{name:"keywords",content:"government competitive exams after 12th,government organisations, exam sarkari results, government calendar,current affairs,top exams for government jobs in india,Upcoming Government Exams"}),e.jsx("meta",{property:"og:title",content:"gyapak"}),e.jsx("meta",{property:"og:description",content:"Find the latest updates on government exams, admit cards, results, and application deadlines for central and state government jobs."})]}),e.jsxs("div",{className:"min-h-screen px-2 sm:px-4",children:[e.jsx("header",{className:"bg-white  pt-32 mx-auto ",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex-1 text-center md:text-left",children:[e.jsxs("h1",{className:"text-5xl font-bold text-purple-800 mb-3 relative inline-block",children:[e.jsx("span",{className:"relative z-10",children:"Current Affairs"}),e.jsx("span",{className:"absolute -bottom-2 left-0 w-full h-2 bg-purple-200 transform -rotate-1 rounded z-0"})]}),e.jsxs("p",{className:"text-lg text-gray-600 mt-1 max-w-xl mx-auto md:mx-0",children:["Curated headlines & insights from ",e.jsx("span",{className:"text-purple-700 font-semibold",children:"gyapak"}),"."]})]}),e.jsxs("div",{className:"relative w-full max-w-md hidden md:block",children:[e.jsx("input",{type:"text",placeholder:"Search current affairs...",className:"w-full pl-10 pr-10 py-2  rounded-full shadow-sm focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition",value:m,onChange:t=>g(t.target.value)}),e.jsx(K,{className:"absolute left-3 top-2.5 text-gray-400 w-5 h-5"}),m&&e.jsx("button",{className:"absolute right-3 top-2.5 text-gray-400 hover:text-gray-600",onClick:()=>g(""),children:e.jsx(ae,{size:16})})]})]}),e.jsxs("div",{className:"mt-5 border-gray-100 pt-4",children:[e.jsx("div",{className:"flex gap-3 p-3  overflow-x-auto scrollbar-hide md:flex-wrap md:overflow-visible",children:["all","monthly","yearly","today"].map((t,a,n)=>e.jsxs("button",{ref:s=>C.current[t]=s,className:`px-4 py-2 text-sm whitespace-nowrap font-medium rounded-full transition focus:ring-2 outline-none ring-purple-300 ring-offset-2 ${p===t?"bg-purple-100 text-purple-800 shadow-sm":"text-gray-600 hover:text-purple-600 hover:bg-gray-100"}`,onClick:()=>P(t),children:[t==="all"&&"All Affairs",t==="today"&&"Today's Highlights",t==="monthly"&&"Monthly Archive",t==="yearly"&&"Yearly Archive"]},t))}),e.jsx("div",{className:"mt-2 flex justify-center md:hidden",children:e.jsx("div",{className:"h-[3px] w-16 bg-purple-300 rounded-full"})})]}),O&&e.jsx("div",{className:"mt-4"})]})}),e.jsx("main",{className:"container mx-auto px-0 md:px-4 mt-2 pb-12",children:R?e.jsx("div",{className:"flex justify-center py-20",children:e.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-sm pt-28 text-center",children:[e.jsx("div",{className:"animate-spin w-12 h-12 border-4 border-purple-300 border-t-purple-600 rounded-full mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading current affairs..."})]})}):A?e.jsxs("div",{className:"bg-red-50 p-6 pt-48 rounded-lg text-center",children:[e.jsx(re,{size:48,className:"mx-auto text-red-500 mb-4"}),e.jsx("h3",{className:"text-xl font-medium text-red-800 mb-2",children:"Oops! Something went wrong"}),e.jsx("p",{className:"text-red-600 mb-4",children:A}),e.jsx("button",{className:"px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 font-medium",onClick:V,children:"Try Again"})]}):x.length>0?e.jsxs(e.Fragment,{children:[r&&e.jsx("div",{className:"mb-12",children:e.jsxs("div",{onClick:()=>S(r),className:"bg-white rounded-xl shadow-md overflow-hidden border border-gray-100",children:[r.mediaType==="image"&&r.mediaUrl&&e.jsxs("div",{className:"relative bg-gray-100 rounded-t-xl overflow-hidden",children:[e.jsx("img",{src:r.mediaUrl||"/api/placeholder/1200/400",alt:r.title,className:"w-full h-auto object-contain max-h-[420px]",onError:t=>{t.target.src="/api/placeholder/1200/400",t.target.alt="Image unavailable"}}),e.jsx("div",{className:"absolute top-4 left-4",children:e.jsx("span",{className:"bg-purple-600 text-white px-3 py-1 rounded-full text-sm font-medium",children:r.category})})]}),r.mediaType==="video"&&r.mediaUrl&&e.jsxs("div",{className:"relative aspect-video w-full",children:[e.jsx("video",{src:r.mediaUrl,className:"w-full h-full object-cover",controls:!0,poster:"/api/placeholder/1200/400",children:"Your browser does not support the video tag."}),e.jsx("div",{className:"absolute top-4 left-4",children:e.jsx("span",{className:"bg-purple-600 text-white px-3 py-1 rounded-full text-sm font-medium",children:r.category})})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center text-sm text-gray-500 mb-3",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx(D,{size:14,className:"mr-1"}),b(r.date)]}),r.mediaType&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"mx-2",children:"•"}),e.jsxs("span",{className:"flex items-center",children:[M(r.mediaType),e.jsx("span",{className:"ml-1",children:r.mediaType.charAt(0).toUpperCase()+r.mediaType.slice(1)})]})]})]}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-3 hover:text-purple-700 transition-colors",children:r.title}),e.jsx("div",{className:"text-gray-700 mb-5 leading-relaxed text-lg",children:L(r.content,400)}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-5",children:r.tags?.map((t,a)=>e.jsxs("span",{className:"inline-flex items-center text-xs text-purple-600 bg-purple-50 px-3 py-1 rounded-full",children:[e.jsx(F,{size:12,className:"mr-1"}),t]},a))}),r.source&&e.jsxs("div",{className:"flex items-center text-sm text-purple-600 hover:text-purple-800",children:[e.jsx(U,{size:14,className:"mr-1"}),e.jsxs("a",{href:r.source,target:"_blank",rel:"noopener noreferrer",className:"hover:underline",children:["Source: ",r.source.replace(/(^\w+:|^)\/\//,"").split("/")[0]]})]})]})]})}),$.map(t=>{const n=z[t].filter(s=>s!==r);return n.length===0?null:e.jsxs("div",{className:"mb-10",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-purple-100 flex items-center justify-center mr-3",children:e.jsx(le,{className:"text-purple-700",size:20})}),e.jsx("h2",{className:"text-lg font-bold text-purple-800",children:b(t)})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:n.map((s,l)=>e.jsx("article",{onClick:()=>S(s),className:"bg-white rounded-xl shadow-sm hover:shadow-md transition-shadow overflow-hidden border border-gray-100",children:e.jsxs("div",{className:"p-6",children:[_(s),e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("span",{className:"bg-purple-100 text-purple-700 px-3 py-1 rounded-full text-sm font-medium",children:s.category}),e.jsxs("div",{className:"flex gap-2 items-center",children:[s.mediaType&&e.jsxs("span",{className:"flex items-center text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded",children:[M(s.mediaType),e.jsx("span",{className:"ml-1",children:s.mediaType.charAt(0).toUpperCase()+s.mediaType.slice(1)})]}),e.jsxs("span",{className:"flex items-center text-sm text-gray-500",children:[e.jsx(D,{size:14,className:"mr-1"}),b(s.date)]})]})]}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3 hover:text-purple-700 transition-colors",children:s.title}),e.jsx("div",{className:"text-gray-700 mb-5 leading-relaxed",children:e.jsx("div",{className:"line-clamp-3",children:L(s.content,150)})}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-5",children:s.tags&&s.tags.map((c,u)=>e.jsxs("span",{className:"inline-flex items-center text-xs text-purple-600 bg-purple-50 px-3 py-1 rounded-full",children:[e.jsx(F,{size:12,className:"mr-1"}),c]},u))}),s.source&&e.jsxs("div",{className:"flex items-center text-sm text-purple-600 hover:text-purple-800",children:[e.jsx(U,{size:14,className:"mr-1"}),e.jsxs("a",{href:s.source,target:"_blank",rel:"noopener noreferrer",className:"hover:underline",children:["Source: ",s.source.replace(/(^\w+:|^)\/\//,"").split("/")[0]]})]})]})},l))})]},t)})]}):e.jsx("div",{className:"flex justify-center py-20",children:e.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-sm text-center max-w-md",children:[e.jsx("div",{className:"w-16 h-16 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(ne,{size:24,className:"text-purple-700"})}),e.jsx("h3",{className:"text-xl font-medium text-gray-800 mb-2",children:"No current affairs found"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Try adjusting your search or filters to find what you're looking for"}),e.jsx("button",{className:"px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 font-medium",onClick:q,children:"Clear Filters"})]})})})]})]})}export{ve as default};
