const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/StateCard-qvXH5dHN.js","assets/index-BSoFxZP0.js","assets/index-IwJ0CcE6.css","assets/map-pin-y7FXB9G0.js","assets/arrow-right-CCwQfz9N.js"])))=>i.map(i=>d[i]);
import{r,_ as P,u as B,b as q,d as x,C as p,j as e,S as h,e as K}from"./index-BSoFxZP0.js";import{l as W}from"./lodash-DYTTmcao.js";import{h as w}from"./moment-C5S46NFB.js";import{u as y}from"./useQuery-CoYND-pd.js";import{X as $}from"./x-CGJvbtgi.js";const S=r.lazy(()=>P(()=>import("./StateCard-qvXH5dHN.js"),__vite__mapDeps([0,1,2,3,4]))),X=()=>{const{apiBaseUrl:l,setApiBaseUrl:n}=B(),[c,E]=r.useState(!1),[i,k]=r.useState("North"),[C,m]=r.useState(""),[a,f]=r.useState([]),[M,d]=r.useState(!1),[T,O]=r.useState(0),R=q();r.useEffect(()=>{if(a){const s=a?.length;O(s)}},[a]);const Y=s=>{m(s),g(s)},D=s=>{R(`/state/?name=${s}`),m(s),d(!1)},g=W.debounce(async s=>{if(!s){f([]),d(!1);return}try{const t=await x.get(`${l}/api/search/state`,{params:{q:s}});f(t.data.suggestions),console.log(t.data.suggestions),d(!0)}catch(t){if(console.error("Error fetching suggestions:",t),t.response||t.request)if(t.response&&t.response.status>=500&&t.response.status<600||t.code==="ECONNREFUSED"||t.code==="ETIMEDOUT"||t.code==="ENOTFOUND"||t.code==="ERR_NETWORK"){const o=await p();n(o),setTimeout(()=>g(),1e3)}else console.error("Error fetching state count:",t);else console.error("Error fetching state count:",t)}},300),u={North:["Haryana","Himachal Pradesh","Punjab","Uttar Pradesh","Uttarakhand"],South:["Andhra Pradesh","Karnataka","Kerala","Tamil Nadu"],Central:["Madhya Pradesh","Maharashtra"],East:["Bihar","Odisha"],West:["Gujarat","Rajasthan"]};function U(s){return s?typeof s=="number"?w(s).format("MMMM D, YYYY"):w(s,"YYYY-MM-DD").format("MMMM D, YYYY"):""}const _=({title:s,items:t,itemKey:o})=>!t||t.length===0?null:e.jsxs("div",{className:"mb-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm font-semibold text-gray-500 px-3 py-2 bg-gray-50 sticky top-0",children:[e.jsx("span",{children:s}),e.jsx("span",{className:"bg-gray-200 text-gray-600 px-2 py-0.5 rounded-full text-xs",children:t.length})]}),e.jsx("div",{className:"custom-scrollbar",children:t&&t.map((N,I)=>e.jsx("div",{onClick:()=>D(N[o]),className:"px-4 py-2.5 hover:bg-blue-50 cursor-pointer text-gray-700 text-sm transition-colors duration-150",children:N[o]},I))})]}),b=async()=>{try{return(await x.get(`${l}/api/state/count`)).data}catch(s){if(s.response)if(s.response.status>=500&&s.response.status<600){console.error("ðŸš¨ Server Error:",s.response.status,s.response.statusText);const t=p();n(t),b()}else console.error("Error fetching state count:",s);else console.error("Error fetching state count:",s)}},j=async()=>{try{const s=await x.get(`${l}/api/event/lastupdated`);return U(s.data.data)}catch(s){if(s.response)if(s.response.status>=500&&s.response.status<600){console.error("ðŸš¨ Server Error:",s.response.status,s.response.statusText);const t=p();n(t),j()}else console.error("Error fetching state count:",s);else console.error("Error fetching state count:",s)}},{data:v,isLoading1:F}=y({queryKey:["stateCount"],queryFn:b,staleTime:1/0,cacheTime:24*60*60*1e3,refetchOnMount:!0,refetchOnWindowFocus:!1}),{data:L,isLoading2:A}=y({queryKey:["lastUpdated"],queryFn:j,staleTime:1/0,cacheTime:24*60*60*1e3,refetchOnMount:!0,refetchOnWindowFocus:!1});return F||A?e.jsx("div",{children:"Loading..."}):e.jsxs(e.Fragment,{children:[e.jsx("style",{children:`
          .custom-scrollbar::-webkit-scrollbar {
            width: 4px; /* Width of the scrollbar */
          }

          .custom-scrollbar::-webkit-scrollbar-thumb {
            background-color: #888; /* Scrollbar thumb color */
            border-radius: 4px; /* Rounded corners */
          }

          .custom-scrollbar::-webkit-scrollbar-thumb:hover {
            background-color: #555; /* Thumb color on hover */
          }

          .custom-scrollbar::-webkit-scrollbar-track {
            background: transparent; /* Scrollbar track background */
          }
        `}),e.jsxs("div",{className:"mt-8 mb-8",children:[e.jsx("div",{className:"bg-gradient-to-r from-purple-800 to-indigo-800 rounded-t-2xl p-4 sm:p-8 text-white",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-4 sm:space-y-0",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold mb-2",children:"State Government authorities"}),e.jsx("p",{className:"text-purple-200 text-xs sm:text-sm",children:"Explore opportunities across India's public sector"})]}),e.jsx("div",{className:"xl:hidden flex justify-end",children:e.jsx("button",{onClick:()=>E(!c),className:"p-2 hover:bg-white/10 rounded-full",children:c?e.jsx($,{className:"h-5 w-5 text-white"}):e.jsx(h,{className:"h-5 w-5 text-white"})})}),e.jsxs("div",{className:"hidden xl:flex flex-col",children:[e.jsxs("div",{className:"flex items-center bg-white/10 rounded-full p-2 backdrop-blur-sm",children:[e.jsx(h,{className:"h-4 w-4 text-purple-200 ml-2"}),e.jsx("input",{type:"text",onChange:s=>{Y(s.target.value)},placeholder:"Search your state...",className:"bg-transparent border-none focus:outline-none text-white placeholder-purple-200 text-sm ml-2 w-48",autoComplete:"off",value:C})]}),e.jsx("div",{className:"relative",children:M&&a&&e.jsx("div",{className:"custom-scrollbar max-h-72 w-full overflow-auto absolute mt-1 bg-white border border-gray-200 rounded shadow-lg z-50",children:e.jsxs("div",{className:"",children:[a.length>0?e.jsx(_,{title:"States",items:a,itemKey:"name"}):null,T===0?e.jsx("div",{className:"px-4 py-3 text-sm text-gray-500",children:"No suggestions found"}):null]})})})]})]}),c&&e.jsx("div",{className:"mt-4 xl:hidden",children:e.jsxs("div",{className:"flex items-center bg-white/10 rounded-full p-2 backdrop-blur-sm",children:[e.jsx(h,{className:"h-4 w-4 text-purple-200 ml-2"}),e.jsx("input",{type:"text",placeholder:"Search your state...",className:"bg-transparent border-none focus:outline-none text-white placeholder-purple-200 text-sm ml-2 w-full",autoFocus:!0})]})})]})}),e.jsx("div",{className:"bg-purple-900 text-white py-3 px-4 sm:px-8 overflow-x-auto",children:e.jsxs("div",{className:"flex justify-center space-x-6 sm:space-x-12 text-xs sm:text-sm whitespace-nowrap",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-bold",children:v?.states}),e.jsx("div",{className:"text-purple-200 text-xs",children:"States"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-bold",children:v?.exams}),e.jsx("div",{className:"text-purple-200 text-xs",children:"Active Exams"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-bold",children:"1M+"}),e.jsx("div",{className:"text-purple-200 text-xs",children:"Candidates"})]})]})}),e.jsxs("div",{className:"bg-gradient-to-b from-purple-50 to-white rounded-b-2xl p-4 sm:p-8",children:[e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"flex flex-wrap gap-4 whitespace-nowrap p-1",children:Object.keys(u).map(s=>e.jsx("button",{onClick:()=>k(s),className:`px-4 py-2 rounded-full text-sm font-medium transition-colors ${i===s?"bg-purple-800 text-white":"bg-purple-100 text-purple-800 hover:bg-purple-200"}`,children:s},s))})}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-3 lg:grid-cols-4 gap-3 sm:gap-4",children:e.jsx(r.Suspense,{fallback:e.jsx("div",{children:e.jsx("div",{className:"w-full h-screen flex justify-center",children:e.jsx(K,{size:60,color:"#5B4BEA",speedMultiplier:2,className:"my-auto"})})}),children:i?u[i].map((s,t)=>e.jsx(S,{state:s},t)):Object.values(u).flat().map((s,t)=>e.jsx(S,{state:s},t))})}),e.jsx("div",{className:"mt-6 sm:mt-8 text-center",children:e.jsxs("p",{className:"text-xs sm:text-sm text-purple-600",children:["Last updated: ",L]})})]})]})]})};export{X as default};
