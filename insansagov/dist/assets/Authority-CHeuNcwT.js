import{j as e,r as i,a as L,d as R,h as T,i as B,H as _,b as M,c as I}from"./index-Blcj_2Q4.js";import{f as H}from"./dateFormatter-Bnw4dpKK.js";import{u as V}from"./useEventRouting-Bf7LmZwF.js";import{B as q}from"./building-2-DYEyMo_t.js";import{C as $}from"./clock-bEArU7yT.js";import z from"./ViewMoreButton-DFNg4oKw.js";import K from"./LatestUpdateCard-CC3wDLs2.js";import{R as P}from"./RelatedAuthorities-CAhHVIIn.js";import{n as Q}from"./no_data-ZhIxPc4_.js";import{u as W}from"./useQuery-Cm-XwrIp.js";import{E as G}from"./ExamCalendar-D7CrAIOv.js";import"./lodash-CZK75vGX.js";import J from"./FAQ-HxuVOeWo.js";import"./pdf.worker-D6-XlEtG.js";import"./urlUtils.utils-BjqSc7UL.js";import"./moment-C5S46NFB.js";import"./calendar-DSVHOJ-8.js";import"./tag-D1RTrVn0.js";import"./TopAuthoritiesCard-DM_V3Bck.js";import"./chevron-down-BXJ8AVX1.js";import"./circle-check-big-BooOPQjX.js";import"./Helmet-Du4d8yM_.js";import"./index-Chjiymov.js";const X=n=>{const a=n?.item,{navigateToEvent:c,getEventHref:o,prefetchEventRoute:u}=V({fallback:"old"});return e.jsx("div",{className:"w-full bg-white rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 border border-purple-100",children:e.jsxs("div",{className:"p-4 flex flex-col h-full",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2 line-clamp-2",children:a?.name||"No Name Available"}),e.jsxs("div",{className:"flex items-center text-gray-600 mb-4",children:[e.jsx(q,{className:"w-4 h-4 mr-2"}),e.jsx("span",{className:"text-sm",children:n.authority})]})]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center text-gray-500",children:[e.jsx($,{className:"w-4 h-4 mr-2"}),e.jsxs("span",{className:"text-sm",children:["Updated: ",a?.updatedAt?H(a.updatedAt):"N/A"]})]}),e.jsx("a",{href:o(a),onMouseEnter:()=>u(a),onClick:s=>{s.preventDefault(),c(a)},className:"bg-purple-600 text-white px-3 py-2 rounded-lg text-xs font-medium hover:bg-purple-700 transition-colors",children:"View Details"})]})})]})})},Y=n=>{const[a,c]=i.useState(!1),[o,u]=i.useState(n.latestUpdates),[s,m]=i.useState(n.latestUpdates.slice(0,2)),j=()=>{c(!a),m(a?o.slice(0,2):o)};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between mb-5",children:[e.jsxs("div",{className:"font-bold text-2xl flex items-center",children:["Latest Updates for ",n.organization]}),o.length>2&&e.jsx(z,{content:a?"view less ▲":"View More ▼",onClick:j})]}),n.titleHidden?null:e.jsx("div",{className:"space-y-5 mb-10",children:s&&s.map((l,f)=>e.jsx(K,{id:l._id,name:l.name,date:l.updatedAt,organization:n.name,apply_link:l.apply_link},f))})]})},ye=()=>{const{apiBaseUrl:n,setApiBaseUrl:a,setServerError:c}=L(),[o,u]=i.useState(!1),[s,m]=i.useState(),[j,l]=i.useState(),f=R(),[v,w]=i.useState(),[N,g]=i.useState(),[b,E]=i.useState(),[y,O]=i.useState(!1),S=f.pathname.split("/")[2];new URLSearchParams(f.search);const{name:U}=T(),k=async()=>{try{const t=await M.get(`${n}/api/organization/${U}`);if(t.status===201){m(t.data.organization),E(t.data.relatedOrganizations.filter(x=>x._id!==t.data.organization._id));const r=t.data.events.sort((x,h)=>{const p=new Date(x.updatedAt),A=new Date(h.updatedAt);return isNaN(p)||isNaN(A)?0:A-p});return l(r),w(r),g(r.slice(0,6)),t.data}}catch(t){if(console.log(t.response),t.response||t.request)if(t.response&&t.response.status>=500&&t.response.status<600||t.code==="ECONNREFUSED"||t.code==="ETIMEDOUT"||t.code==="ENOTFOUND"||t.code==="ERR_NETWORK"){const r=await I();a(r),c(t.response.status)}else console.error("Error fetching state count:",t);else console.error("Error fetching state count:",t)}},{data:d,isLoading:C}=W({queryKey:["fetchOrganization/"+U,n],queryFn:k,staleTime:1/0,cacheTime:24*60*60*1e3,refetchOnMount:!0,refetchOnWindowFocus:!1});i.useEffect(()=>{if(d){E(d.relatedOrganizations.filter(r=>r._id!==d.organization._id));const t=d.events.sort((r,x)=>{const h=new Date(r.updatedAt),p=new Date(x.updatedAt);return isNaN(h)||isNaN(p)?0:p-h});l(t),w(t),g(t.slice(0,6)),m(d.organization)}},[d]);const D=()=>{u(!o),g(o?v.slice(0,6):v)};if(C||!s)return e.jsx("div",{className:"w-full h-screen flex justify-center",children:e.jsx(B,{size:60,color:"#5B4BEA",speedMultiplier:2,className:"my-auto"})});const F=()=>{y?document.getElementById("view-calendar").innerHTML="View annual calendar":document.getElementById("view-calendar").innerHTML="Hide annual calendar",O(!y)};return e.jsxs(e.Fragment,{children:[e.jsxs(_,{children:[e.jsx("title",{children:S}),e.jsx("meta",{name:"description",content:"gyapak.in is a trusted source for the latest government exam updates, including exam dates, notifications, admit cards, and results for both central and state government departments. Stay updated with real-time information on competitive exams, application deadlines, and result announcements!"}),e.jsx("meta",{name:"keywords",content:"government competitive exams after 12th,government organisations, exam sarkari results, government calendar,current affairs,top exams for government jobs in india,Upcoming Government Exams"}),e.jsx("meta",{property:"og:title",content:"gyapak"}),e.jsx("meta",{property:"og:description",content:"Find the latest updates on government exams, admit cards, results, and application deadlines for central and state government jobs."})]}),e.jsxs("div",{className:"pt-28 bg-red",children:[e.jsxs("div",{className:"flex flex-col justify-center mb-20",children:[e.jsx("img",{src:s.logo,className:"w-32 self-center mb-5",alt:""}),e.jsx("h1",{className:"text-3xl self-center font-bold mb-5",children:s.name}),e.jsx("div",{className:"self-center text-center",children:s.description})]}),s.calendar?e.jsx("div",{className:"flex justify-end mb-10",children:e.jsx("button",{id:"view-calendar",onClick:F,className:"py-3 px-4 rounded-md bg-purple-700 text-white font-medium",children:"View annual calendar"})}):null,y?e.jsx(G,{organizationId:s._id}):null,N.length>0?e.jsxs(e.Fragment,{children:[e.jsx(Y,{latestUpdates:j,name:s.abbreviation,organization:s.name}),e.jsxs("div",{className:"font-bold text-2xl flex items-center mb-5",children:["Events under ",s.name]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-7 mb-10",children:N&&N.map((t,r)=>e.jsx(X,{index:r,item:t,authority:s.abbreviation}))}),v.length>6?e.jsx("div",{className:"flex justify-center mb-20",children:e.jsx(z,{content:o?"view less ▲":"View More ▼",onClick:D})}):null]}):e.jsxs(e.Fragment,{children:[e.jsxs("h3",{className:"text-center font-bold text-lg mb-5",children:["No Active events for ",s.abbreviation," right now!"]}),e.jsx("img",{src:Q,className:"w-5/12 mx-auto"})]}),s._id&&e.jsx("div",{className:"px-4 md:px-16  py-16",children:e.jsx(J,{orgId:s._id,title:`frequently asked questions for ${s.abbreviation}`})}),b&&b.length>0?e.jsxs(e.Fragment,{children:[e.jsxs("h1",{className:"text-2xl xl:text-3xl font-bold text-gray-900 mb-5",children:["Related Authorities for ",s.abbreviation]}),e.jsx(P,{organizations:b})]}):null]})]})};export{ye as default};
