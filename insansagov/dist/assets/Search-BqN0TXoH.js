import{u as N,r as a,e as E,C as S,j as t,S as k}from"./index-CgX5nck7.js";import{l as C}from"./lodash-CZK75vGX.js";import"./pdf.worker-D6-XlEtG.js";const O=n=>{const{apiBaseUrl:m,setApiBaseUrl:b,setServerError:p}=N(),[g,i]=a.useState(""),[r,d]=a.useState([]),[f,o]=a.useState(!1),[c,y]=a.useState(0);a.useEffect(()=>{n.input&&(i(n.input),o(!1))},[n]),a.useEffect(()=>{if(r.organizations||r.authorities||r.categories){const s=(r.organizations?.length||0)+(r.authorities?.length||0)+(r.categories?.length||0);y(s)}},[r]);const v=s=>{i(s),h(s)},j=s=>{n.searchHandler(s),i(s),o(!1)},h=C.debounce(async s=>{if(!s){d([]),o(!1);return}try{const e=await E.get(`${m}/api/search/`,{params:{q:s.trim()}});d(e.data.suggestions),o(!0),console.log(e.data.suggestions)}catch(e){if(console.error("Error fetching suggestions:",e),e.response||e.request)if(e.response&&e.response.status>=500&&e.response.status<600||e.code==="ECONNREFUSED"||e.code==="ETIMEDOUT"||e.code==="ENOTFOUND"||e.code==="ERR_NETWORK"){const l=await S();b(l),p(e.response.status),setTimeout(()=>h(),1e3)}else console.error("Error fetching state count:",e);else console.error("Error fetching state count:",e)}},600),u=({title:s,items:e,itemKey:l})=>!e||e.length===0?null:t.jsxs("div",{className:"mb-2",children:[t.jsxs("div",{className:"flex items-center justify-between text-sm font-semibold text-gray-500 px-3 py-2 bg-gray-50 sticky top-0",children:[t.jsx("span",{children:s}),t.jsx("span",{className:"bg-gray-200 text-gray-600 px-2 py-0.5 rounded-full text-xs",children:e.length})]}),t.jsx("div",{className:"custom-scrollbar",children:e.map((x,w)=>t.jsx("div",{onClick:()=>j(x[l]),className:"px-4 py-2.5 hover:bg-blue-50 cursor-pointer text-gray-700 text-sm transition-colors duration-150",children:x[l]},w))})]});return t.jsx(t.Fragment,{children:t.jsxs("div",{className:"relative w-full max-w-xl mx-auto",children:[t.jsx("style",{children:`
          .custom-scrollbar::-webkit-scrollbar {
            width: 4px; /* Width of the scrollbar */
          }

          .custom-scrollbar::-webkit-scrollbar-thumb {
            background-color: #888; /* Scrollbar thumb color */
            border-radius: 4px; /* Rounded corners */
            }
            
            .custom-scrollbar::-webkit-scrollbar-thumb:hover {
              background-color: #555; /* Thumb color on hover */
          }

          .custom-scrollbar::-webkit-scrollbar-track {
            background: transparent; /* Scrollbar track background */
            }
            `}),t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"absolute inset-y-0 left-3 flex items-center pointer-events-none",children:t.jsx(k,{className:"h-5 w-5 text-gray-400"})}),t.jsx("input",{type:"text",value:g,onChange:s=>v(s.target.value),onKeyDown:s=>{s.key==="Enter"&&(n.searchHandler(s.target.value),s.preventDefault())},className:"w-full pl-10 pr-4 py-2.5 rounded-lg border border-gray-200 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 outline-none text-gray-700",placeholder:"Search Authority, Exams...",autoComplete:"off",onFocus:()=>g&&o(!0),onBlur:()=>setTimeout(()=>o(!1),1e3)}),f&&t.jsxs("div",{className:"custom-scrollbar max-h-72 overflow-auto absolute left-0 right-0 top-full mt-1 bg-white border border-gray-200 rounded shadow-lg z-50",children:[c>0&&t.jsxs("div",{className:"px-3 py-2 bg-gray-100 border-b border-gray-200 text-xs text-gray-500",children:["Found ",c," total matches"]}),t.jsxs("div",{className:"",children:[r.authorities?.length>0&&t.jsx(u,{title:"States",items:r.authorities,itemKey:"name"}),r.organizations?.length>0&&t.jsx(u,{title:"Organizations",items:r.organizations,itemKey:"abbreviation"}),r.categories?.length>0&&t.jsx(u,{title:"Categories",items:r.categories,itemKey:"category"}),!c&&t.jsx("div",{className:"px-4 py-3 text-sm text-gray-500",children:"No suggestions found"})]})]})]})]})})};export{O as default};
