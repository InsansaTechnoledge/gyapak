import{c as U,j as e,u as M,r as n,H,S as B,e as A,C as D}from"./index-C6Rqu_Ax.js";import{B as K}from"./building-2-BMAJlv-D.js";import{C as R}from"./calendar-CeeSfMf3.js";import{F as q}from"./filter-BMDoESCB.js";/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=U("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),z=({card:o})=>e.jsxs("div",{className:"p-4 border border-purple-800 rounded-lg shadow-sm hover:shadow-md transition-shadow bg-white flex flex-col justify-between",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold mb-2 flex items-center gap-2",children:[e.jsx(K,{className:"h-5 w-5"}),o.abbreviation]}),e.jsx("p",{className:"font-medium mb-2",children:o.name}),e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(R,{className:"h-4 w-4"}),"Released: ",new Date(o.date_of_notification).toLocaleDateString()]}),e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(R,{className:"h-4 w-4"}),"Last Date: ",new Date(o.end_date).toLocaleDateString()]}),e.jsx("span",{className:"inline-block mt-2 px-2 py-1 rounded-full text-xsbg-green-100 text-green-800",children:"ACTIVE"})]})]}),e.jsx("div",{children:e.jsx("a",{href:o.apply_link,target:"_blank",rel:"noopener noreferrer",className:"block mt-4 px-4 py-2 bg-purple-800 text-white text-center rounded-md hover:bg-purple-900 transition-colors",children:"View Admit Card"})})]},o._id),W=()=>{const{apiBaseUrl:o,setApiBaseUrl:g,setServerError:p}=M(),[c,_]=n.useState(""),[i,O]=n.useState("All"),[l,f]=n.useState(),[d,x]=n.useState(),[h,T]=n.useState(),[k,u]=n.useState(!0),[j,b]=n.useState(!1),F=30*60*1e3,I=24*60*60*1e3,v="admit_cards_cache",C="categories_cache",N=(s,a)=>{const t=localStorage.getItem(s);if(!t)return null;const{data:r,timestamp:m}=JSON.parse(t);return Date.now()-m>a?(localStorage.removeItem(s),null):r},E=(s,a)=>{const t={data:a,timestamp:Date.now()};localStorage.setItem(s,JSON.stringify(t))},w=async(s=!1)=>{const a=s?null:N(v,F);if(a){console.log("Using cached admit cards"),x(a),u(!1);return}try{u(!0);const t=await A.get(`${o}/api/admitCard/`),r=await t.json();t.ok?(x(r),E(v,r)):console.error("Failed to fetch admit cards:",r)}catch(t){if(console.error("Error fetching admit cards:",t),t.response||t.request)if(t.response&&t.response.status>=500&&t.response.status<600||t.code==="ECONNREFUSED"||t.code==="ETIMEDOUT"||t.code==="ENOTFOUND"||t.code==="ERR_NETWORK"){const r=await D();g(r),p(t.response.status)}else console.error("Error fetching state count:",t);else console.error("Error fetching state count:",t)}finally{u(!1)}},y=async(s=!1)=>{const a=s?null:N(C,I);if(a){console.log("Using cached categories"),f(a);return}try{const t=await A.get(`${o}/api/category/getcategories`),r=await t.json();if(t.ok){const m=["All",...r.map(S=>S.category)];f(m),E(C,m)}else console.error("Failed to fetch categories:",r)}catch(t){if(console.error("Error fetching categories:",t),t.response||t.request)if(t.response&&t.response.status>=500&&t.response.status<600||t.code==="ECONNREFUSED"||t.code==="ETIMEDOUT"||t.code==="ENOTFOUND"||t.code==="ERR_NETWORK"){const r=await D();g(r),p(t.response.status)}else console.error("Error fetching state count:",t);else console.error("Error fetching state count:",t)}},L=async()=>{b(!0),await Promise.all([w(!0),y(!1)]),b(!1)};return n.useEffect(()=>{w(),y()},[o]),n.useEffect(()=>{l&&d&&T(Array.isArray(d)?d.filter(s=>{const a=i==="All"||s.category===i,t=c.trim()===""||s.title.toLowerCase().includes(c.toLowerCase())||s.organization.toLowerCase().includes(c.toLowerCase());return a&&t}):[])},[l,d,i,c]),e.jsxs(e.Fragment,{children:[e.jsxs(H,{children:[e.jsx("title",{children:"gyapak"}),e.jsx("meta",{name:"description",content:"gyapak.in is a trusted source for the latest government exam updates, including exam dates, notifications, admit cards, and results for both central and state government departments. Stay updated with real-time information on competitive exams, application deadlines, and result announcements!"}),e.jsx("meta",{name:"keywords",content:"government exams, exam dates, admit cards, results, central government jobs, state government jobs, competitive exams, government jobs"}),e.jsx("meta",{property:"og:title",content:"gyapak"}),e.jsx("meta",{property:"og:description",content:"Find the latest updates on government exams, admit cards, results, and application deadlines for central and state government jobs."})]}),e.jsxs("div",{className:"bg-white pt-28 rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Latest Admit Cards"}),e.jsxs("button",{onClick:L,className:"flex items-center px-3 py-2 bg-blue-50 text-blue-600 rounded-md hover:bg-blue-100 transition",disabled:j,children:[e.jsx($,{className:`h-4 w-4 mr-2 ${j?"animate-spin":""}`}),"Refresh"]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(B,{className:"absolute left-3 top-2.5 h-5 w-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search exams or organizations",className:"pl-10 w-full h-10 rounded-md border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:c,onChange:s=>_(s.target.value)})]}),e.jsxs("div",{className:"relative",children:[e.jsx(q,{className:"absolute left-3 top-2.5 h-5 w-5 text-gray-400"}),e.jsx("select",{className:"pl-10 h-10 rounded-md border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white",value:i,onChange:s=>O(s.target.value),children:l&&l.map(s=>e.jsx("option",{value:s,children:s},s))})]})]}),e.jsx("div",{children:k?e.jsx("div",{className:"flex justify-center py-8",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):h&&h.length>0?e.jsx("div",{className:"flex flex-col",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:h.map((s,a)=>e.jsx(z,{card:s},a))})}):e.jsx("p",{className:"text-gray-500",children:"No admit cards found."})})]})]})};export{W as default};
