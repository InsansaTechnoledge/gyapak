import{c as p,r as i,u as W,j as e,S as X}from"./index-CJVk7EkQ.js";import{f as G,a as K,b as Q,c as Z}from"./currentAffairService-DI5pR9eF.js";import{X as ee}from"./x-BqepjK-j.js";import{R as te}from"./refresh-cw-BCZfoi8a.js";import{T as z}from"./triangle-alert-B3tdz69B.js";import{C as U}from"./clock-BOudHy_j.js";import{T as F}from"./tag-BPI5kdQf.js";import{C as se}from"./calendar-l_oLAoGj.js";import{B as ae}from"./book-open-BE0yva7X.js";import"./pdf.worker-D6-XlEtG.js";/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=p("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=p("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=p("Film",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 3v18",key:"bbkbws"}],["path",{d:"M3 7.5h4",key:"zfgn84"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 16.5h4",key:"1230mu"}],["path",{d:"M17 3v18",key:"in4fa5"}],["path",{d:"M17 7.5h4",key:"myr1c1"}],["path",{d:"M17 16.5h4",key:"go4c1d"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=p("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D=p("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]);function je(){const[u,E]=i.useState([]),[o,h]=i.useState(""),[g,Y]=i.useState(""),[x,I]=i.useState(""),[v,q]=i.useState(""),[N,O]=i.useState(""),[R,ne]=i.useState(!1),[f,w]=i.useState(!0),[y,$]=i.useState("all"),[k,A]=i.useState(null),B=W(),T=t=>{const s=t.date?.split("T")[0],l=t.title?.toLowerCase().replace(/\s+/g,"-");B(`/current-affairs/${s}/${l}`)},j=async(t=y)=>{w(!0),A(null);try{let s;switch(t){case"today":s=await Z();break;case"monthly":{const c=new Date,n=g||c.getMonth()+1,m=x||c.getFullYear();s=await Q(n,m);break}case"yearly":{const c=new Date().getFullYear();s=await K(x||c);break}case"all":default:s=await G();break}const l=Array.isArray(s.data)?s.data:[];let r=[];l.forEach(c=>{Array.isArray(c.affairs)&&c.affairs.length>0&&c.affairs.forEach(n=>{r.push({...n,date:c.date,mediaType:n.videoUrl?"video":n.imageUrl?"image":"text",mediaUrl:n.videoUrl||n.imageUrl||null})})}),E(r)}catch{A("Failed to load current affairs. Please try again later.")}finally{w(!1)}};i.useEffect(()=>{j()},[]),[...new Set(u.map(t=>t.category))],[...new Set(u.map(t=>t.date?.split("-")[0]))];const H=["January","February","March","April","May","June","July","August","September","October","November","December"],b=t=>new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),J=t=>{$(t),j(t)},C=()=>{j(y)},S=t=>{switch(t){case"image":return e.jsx(ce,{size:16});case"video":return e.jsx(le,{size:16});case"audio":return e.jsx(D,{size:16});case"text":default:return e.jsx(ae,{size:16})}},d=u.filter(t=>{const s=o===""||t.title?.toLowerCase().includes(o.toLowerCase())||t.content?.toLowerCase().includes(o.toLowerCase()),l=v===""||t.category===v,r=x===""||t.date?.startsWith(x),c=g===""||t.date?.split("-")[1]===String(H.findIndex(m=>m===g)+1).padStart(2,"0"),n=N===""||t.mediaType===N;return s&&l&&r&&c&&n}),M=d.reduce((t,s)=>{const l=s.date?.split("T")[0];return t[l]||(t[l]=[]),t[l].push(s),t},{}),V=Object.keys(M).sort((t,s)=>new Date(s)-new Date(t)),P=()=>{q(""),I(""),Y(""),O(""),h("")},_=t=>{if(!t.mediaUrl)return null;switch(t.mediaType){case"image":return e.jsx("div",{className:"mb-4 relative aspect-video rounded-lg overflow-hidden",children:e.jsx("img",{src:t.mediaUrl||"/api/placeholder/800/450",alt:t.title,className:"w-full h-full object-cover",onError:s=>{s.target.src="/api/placeholder/800/450",s.target.alt="Image unavailable"}})});case"video":return e.jsx("div",{className:"mb-4 relative aspect-video rounded-lg overflow-hidden",children:e.jsx("video",{src:t.mediaUrl,className:"w-full h-full object-cover",controls:!0,poster:"/api/placeholder/800/450",children:"Your browser does not support the video tag."})});case"audio":return e.jsxs("div",{className:"mb-4 bg-purple-50 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx(D,{className:"text-purple-700 mr-2"}),e.jsx("span",{className:"text-purple-800 font-medium",children:"Audio Content"})]}),e.jsxs("audio",{controls:!0,className:"w-full",children:[e.jsx("source",{src:t.mediaUrl}),"Your browser does not support the audio element."]})]});default:return null}},a=(()=>{if(d.length===0)return null;const t=d.filter(r=>r.mediaType==="image"||r.mediaType==="video"),s=t.length>0?t:d,l=Math.floor(Math.random()*s.length);return s[l]})();return a&&d.filter(t=>t!==a),e.jsxs("div",{className:"min-h-screen px-2 sm:px-4",children:[e.jsx("header",{className:"bg-white  pt-32 mx-auto ",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex-1 text-center md:text-left",children:[e.jsxs("h1",{className:"text-5xl font-bold text-purple-800 mb-3 relative inline-block",children:[e.jsx("span",{className:"relative z-10",children:"Current Affairs"}),e.jsx("span",{className:"absolute -bottom-2 left-0 w-full h-2 bg-purple-200 transform -rotate-1 rounded z-0"})]}),e.jsxs("p",{className:"text-lg text-gray-600 mt-1 max-w-xl mx-auto md:mx-0",children:["Curated headlines & insights from ",e.jsx("span",{className:"text-purple-700 font-semibold",children:"gyapak"}),"."]})]}),e.jsxs("div",{className:"relative w-full max-w-md hidden md:block",children:[e.jsx("input",{type:"text",placeholder:"Search current affairs...",className:"w-full pl-10 pr-10 py-2  rounded-full shadow-sm focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition",value:o,onChange:t=>h(t.target.value)}),e.jsx(X,{className:"absolute left-3 top-2.5 text-gray-400 w-5 h-5"}),o&&e.jsx("button",{className:"absolute right-3 top-2.5 text-gray-400 hover:text-gray-600",onClick:()=>h(""),children:e.jsx(ee,{size:16})})]}),e.jsx("div",{className:"flex items-center gap-3 ml-4",children:e.jsx("button",{className:`p-2 rounded-full hover:bg-purple-50 text-gray-600 ${f?"animate-spin":""}`,onClick:C,disabled:f,children:e.jsx(te,{size:20})})})]}),e.jsx("div",{className:"mt-5 flex flex-wrap gap-4 border-t border-gray-100 pt-4",children:["all","today","monthly","yearly"].map(t=>e.jsxs("button",{className:`px-4 py-2 text-sm font-medium rounded-full transition ${y===t?"bg-purple-100 text-purple-800 shadow-sm":"text-gray-600 hover:text-purple-600 hover:bg-gray-100"}`,onClick:()=>J(t),children:[t==="all"&&"All Affairs",t==="today"&&"Today's Highlights",t==="monthly"&&"Monthly Archive",t==="yearly"&&"Yearly Archive"]},t))}),R&&e.jsx("div",{className:"mt-4"})]})}),e.jsxs("div",{className:"mt-4 text-sm text-gray-600 bg-purple-50 border border-purple-100 rounded-lg p-3 mb-8 flex items-center gap-2",children:[e.jsx(z,{className:"text-purple-500",size:18}),e.jsx("span",{children:"Click on any card to view probable questions and full details of the current affair."})]}),e.jsx("main",{className:"container mx-auto px-4  pb-12",children:f?e.jsx("div",{className:"flex justify-center py-20",children:e.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-sm pt-28 text-center",children:[e.jsx("div",{className:"animate-spin w-12 h-12 border-4 border-purple-300 border-t-purple-600 rounded-full mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading current affairs..."})]})}):k?e.jsxs("div",{className:"bg-red-50 p-6 pt-48 rounded-lg text-center",children:[e.jsx(z,{size:48,className:"mx-auto text-red-500 mb-4"}),e.jsx("h3",{className:"text-xl font-medium text-red-800 mb-2",children:"Oops! Something went wrong"}),e.jsx("p",{className:"text-red-600 mb-4",children:k}),e.jsx("button",{className:"px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 font-medium",onClick:C,children:"Try Again"})]}):d.length>0?e.jsxs(e.Fragment,{children:[a&&e.jsx("div",{className:"mb-12",children:e.jsxs("div",{onClick:()=>T(a),className:"bg-white rounded-xl shadow-md overflow-hidden border border-gray-100",children:[a.mediaType==="image"&&a.mediaUrl&&e.jsxs("div",{className:"relative aspect-[16/9] sm:h-64 md:h-80 lg:h-[420px] w-full",children:[e.jsx("img",{src:a.mediaUrl||"/api/placeholder/1200/400",alt:a.title,className:"absolute inset-0 w-full h-full object-cover",onError:t=>{t.target.src="/api/placeholder/1200/400",t.target.alt="Image unavailable"}}),e.jsx("div",{className:"absolute top-4 left-4",children:e.jsx("span",{className:"bg-purple-600 text-white px-3 py-1 rounded-full text-sm font-medium",children:a.category})})]}),a.mediaType==="video"&&a.mediaUrl&&e.jsxs("div",{className:"relative aspect-video w-full",children:[e.jsx("video",{src:a.mediaUrl,className:"w-full h-full object-cover",controls:!0,poster:"/api/placeholder/1200/400",children:"Your browser does not support the video tag."}),e.jsx("div",{className:"absolute top-4 left-4",children:e.jsx("span",{className:"bg-purple-600 text-white px-3 py-1 rounded-full text-sm font-medium",children:a.category})})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center text-sm text-gray-500 mb-3",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx(U,{size:14,className:"mr-1"}),b(a.date)]}),a.mediaType&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"mx-2",children:"•"}),e.jsxs("span",{className:"flex items-center",children:[S(a.mediaType),e.jsx("span",{className:"ml-1",children:a.mediaType.charAt(0).toUpperCase()+a.mediaType.slice(1)})]})]})]}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-3 hover:text-purple-700 transition-colors",children:a.title}),e.jsx("p",{className:"text-gray-700 mb-5 leading-relaxed text-lg",children:a.content}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-5",children:a.tags?.map((t,s)=>e.jsxs("span",{className:"inline-flex items-center text-xs text-purple-600 bg-purple-50 px-3 py-1 rounded-full",children:[e.jsx(F,{size:12,className:"mr-1"}),t]},s))}),a.source&&e.jsxs("div",{className:"flex items-center text-sm text-purple-600 hover:text-purple-800",children:[e.jsx(L,{size:14,className:"mr-1"}),e.jsxs("a",{href:a.source,target:"_blank",rel:"noopener noreferrer",className:"hover:underline",children:["Source: ",a.source.replace(/(^\w+:|^)\/\//,"").split("/")[0]]})]})]})]})}),V.map(t=>{const l=M[t].filter(r=>r!==a);return l.length===0?null:e.jsxs("div",{className:"mb-10",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-purple-100 flex items-center justify-center mr-3",children:e.jsx(se,{className:"text-purple-700",size:20})}),e.jsx("h2",{className:"text-lg font-bold text-purple-800",children:b(t)})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:l.map((r,c)=>e.jsx("article",{onClick:()=>T(r),className:"bg-white rounded-xl shadow-sm hover:shadow-md transition-shadow overflow-hidden border border-gray-100",children:e.jsxs("div",{className:"p-6",children:[_(r),e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("span",{className:"bg-purple-100 text-purple-700 px-3 py-1 rounded-full text-sm font-medium",children:r.category}),e.jsxs("div",{className:"flex gap-2 items-center",children:[r.mediaType&&e.jsxs("span",{className:"flex items-center text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded",children:[S(r.mediaType),e.jsx("span",{className:"ml-1",children:r.mediaType.charAt(0).toUpperCase()+r.mediaType.slice(1)})]}),e.jsxs("span",{className:"flex items-center text-sm text-gray-500",children:[e.jsx(U,{size:14,className:"mr-1"}),b(r.date)]})]})]}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3 hover:text-purple-700 transition-colors",children:r.title}),e.jsx("p",{className:"text-gray-700 mb-5 leading-relaxed line-clamp-3",children:r.content}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-5",children:r.tags&&r.tags.map((n,m)=>e.jsxs("span",{className:"inline-flex items-center text-xs text-purple-600 bg-purple-50 px-3 py-1 rounded-full",children:[e.jsx(F,{size:12,className:"mr-1"}),n]},m))}),r.source&&e.jsxs("div",{className:"flex items-center text-sm text-purple-600 hover:text-purple-800",children:[e.jsx(L,{size:14,className:"mr-1"}),e.jsxs("a",{href:r.source,target:"_blank",rel:"noopener noreferrer",className:"hover:underline",children:["Source: ",r.source.replace(/(^\w+:|^)\/\//,"").split("/")[0]]})]})]})},c))})]},t)})]}):e.jsx("div",{className:"flex justify-center py-20",children:e.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-sm text-center max-w-md",children:[e.jsx("div",{className:"w-16 h-16 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(re,{size:24,className:"text-purple-700"})}),e.jsx("h3",{className:"text-xl font-medium text-gray-800 mb-2",children:"No current affairs found"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Try adjusting your search or filters to find what you're looking for"}),e.jsx("button",{className:"px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 font-medium",onClick:P,children:"Clear Filters"})]})})})]})}export{je as default};
