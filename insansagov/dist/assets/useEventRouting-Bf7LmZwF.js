import{b as h,a as C,u as m,r as w}from"./index-Blcj_2Q4.js";import{g as y,s as D}from"./urlUtils.utils-BjqSc7UL.js";const g=new Map,f=6*60*60*1e3,v=(e,t)=>`/top-exams-for-government-jobs-in-india/${D(e)}?id=${t}`,E=(e,t)=>y(e,t),N=(e,t,n="old")=>{if(!t||!e)return"#";const a=g.get(t);return a&&Date.now()-a.ts<f?a.url:n==="new"?E(e,t):v(e,t)},p=async(e,{id:t,name:n},a="old")=>{if(!e||!t||!n)return null;const u=g.get(t);if(u&&Date.now()-u.ts<f)return u.url;try{const{data:l}=await h.get(`${e}/api/event/isNew/${t}`,{withCredentials:!0}),c=l?.isNewEvent,s=c===!0?E(n,t):c===!1?v(n,t):a==="new"?E(n,t):v(n,t);return g.set(t,{url:s,ts:Date.now()}),s}catch{const c=a==="new"?E(n,t):v(n,t);return g.set(t,{url:c,ts:Date.now()}),c}},x=({fallback:e="old"}={})=>{const{apiBaseUrl:t}=C(),n=m(),a=w.useCallback(s=>{const r=s?._id,o=s?.name;return N(o,r,e)},[e]),u=w.useCallback(async(s,r)=>{s?.preventDefault?.();const o=r?._id,i=r?.name;if(!o||!i)return;const d=await p(t,{id:o,name:i},e);d&&n(d)},[t,n,e]),l=w.useCallback(async s=>{const r=s?._id,o=s?.name;if(!r||!o)return;const i=await p(t,{id:r,name:o},e);i&&n(i)},[t,n,e]),c=w.useCallback(async s=>{const r=s?._id,o=s?.name;!r||!o||await p(t,{id:r,name:o},e)},[t,e]);return{getEventHref:a,handleEventClick:u,navigateToEvent:l,prefetchEventRoute:c}};export{x as u};
