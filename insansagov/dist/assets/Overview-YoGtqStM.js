import{a as q,r,j as e,H,S as v,m as M,b as h,C as P}from"./index-CJVk7EkQ.js";import{B as Q}from"./BackButton-DDT0Xdph.js";import{u as V}from"./useQuery-B1jNOKxB.js";import{E as K}from"./ExamCalendar-Cm4bQ7bc.js";import{B as j}from"./building-2-D22bYjXx.js";import{F as W}from"./filter-BIJ69wC_.js";import{F as w}from"./file-text-Bk-knoZa.js";import{C as N}from"./clock-BOudHy_j.js";import{C as f}from"./calendar-l_oLAoGj.js";import"./pdf.worker-D6-XlEtG.js";import"./arrow-left-B1T9hhtO.js";const xe=()=>{const{apiBaseUrl:l,setApiBaseUrl:C,setServerError:B}=q(),[i,S]=r.useState(""),[d,k]=r.useState("all"),[c,E]=r.useState("all"),[Z,ee]=r.useState({}),[b,T]=r.useState([]),[$,y]=r.useState([]),[_,g]=r.useState(!0),z=async()=>{g(!0);try{const[t,a,n]=await Promise.all([h.get(`${l}/api/admitCard`),h.get(`${l}/api/result`),h.get(`${l}/api/organization/calendar/all`)]),m=t.data.map(s=>({...s,category:"documents",title:s.name,organization:s.abbreviation||s.organization,date:s.date_of_notification,status:"Available",documentType:"Card"})),x=a.data.map(s=>({...s,category:"updates",title:s.name,organization:s.abbreviation||s.organization,date:s.date_of_notification,status:"Published",documentType:"Update"}));console.log(n);const u=n.data.map(s=>({...s,category:"calendar",title:s.name,organization:s.abbreviation,date:s.examDate,status:"Active",documentType:"Calendar"})),p=[...m,...x,...u];p.sort((s,I)=>new Date(I.date)-new Date(s.date));const F=[...new Set(p.map(s=>s.organization))].filter(Boolean).sort();return y(F),g(!1),p}catch(t){if(console.error("Failed to fetch data:",t.message),g(!1),t.response||t.request)if(t.response&&t.response.status>=500&&t.response.status<600||t.code==="ECONNREFUSED"||t.code==="ETIMEDOUT"||t.code==="ENOTFOUND"||t.code==="ERR_NETWORK"){const a=await P();C(a),B(t.response.status)}else console.error("Error fetching state count:",t);else console.error("Error fetching state count:",t)}},{data:o,isLoading2:te}=V({queryKey:["overview",l],queryFn:z,staleTime:1/0,cacheTime:24*60*60*1e3,refetchOnMount:!0,refetchOnWindowFocus:!1});r.useEffect(()=>{if(o){const t=[...new Set(o.map(a=>a.organization))].filter(Boolean).sort();y(t),g(!1)}},[o]),r.useEffect(()=>{o&&(()=>{const a=o.filter(n=>{const m=d==="all"||n.organization?.toLowerCase()===d.toLowerCase(),x=c==="all"||n.category===c,u=!i||n.organization?.toLowerCase().includes(i.toLowerCase())||n.title?.toLowerCase().includes(i.toLowerCase());return m&&x&&u});T(a)})()},[i,d,c,o]);const A=t=>{switch(t){case"documents":return w;case"updates":return N;case"calendar":return f;default:return j}},O=t=>{switch(t){case"documents":return J;case"updates":return G;case"calendar":return X;default:return Y}},U=t=>new Date(t).toLocaleDateString("en-US",{day:"numeric",month:"short",year:"numeric"}),R=t=>{document.getElementById("calendar_"+t).classList.toggle("hidden"),document.getElementById("calendar_"+t).classList.contains("hidden")?document.getElementById("btn_"+t).innerHTML="View Annual Calendar":document.getElementById("btn_"+t).innerHTML="Hide Annual Calendar"},L=({item:t})=>{const a=O(t.category),n=A(t.category);return t.category!="calendar"?e.jsxs("div",{className:"bg-white shadow-md rounded-lg overflow-hidden transition-all hover:shadow-lg",children:[e.jsx("div",{className:`h-2 ${a.headerBg}`}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsx("div",{className:"flex items-start justify-between",children:e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:`p-2.5 rounded-xl ${a.iconBg} ring-1 ring-inset ${a.iconRing}`,children:e.jsx(n,{className:`h-5 w-5 ${a.icon}`})}),e.jsxs("div",{children:[e.jsx("h4",{className:`text-lg font-semibold ${a.title} line-clamp-1`,children:t.organization}),e.jsx("span",{className:`text-xs font-medium ${a.typeBadge} px-2.5 py-0.5 rounded-full`,children:t.status})]})]})})}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-gray-900 font-medium text-lg line-clamp-2",children:t.title}),e.jsxs("div",{className:`inline-flex items-center gap-2 text-sm ${a.dateText} bg-gray-50 px-3 py-1.5 rounded-lg`,children:[e.jsx(f,{className:"h-4 w-4"}),e.jsx("span",{children:U(t.date)})]})]}),e.jsx("div",{className:"flex gap-3 pt-2",children:e.jsxs("button",{className:`flex-1 px-4 py-2.5 rounded-lg text-white font-medium transition-all duration-200 
                ${a.button} hover:shadow-lg active:scale-98 flex items-center justify-center gap-2`,onClick:()=>window.open(t.apply_link||"#","_blank"),children:[e.jsx("span",{children:"View Details"}),e.jsx(M,{className:"h-4 w-4"})]})})]})]}):e.jsxs("div",{className:"col-span-3 bg-white shadow-md rounded-lg overflow-hidden transition-all hover:shadow-lg",children:[e.jsx("div",{className:`h-2 ${a.headerBg}`}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsx("div",{className:"flex items-start justify-between",children:e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:`p-2.5 rounded-xl ${a.iconBg} ring-1 ring-inset ${a.iconRing}`,children:e.jsx(n,{className:`h-5 w-5 ${a.icon}`})}),e.jsx("div",{children:e.jsx("h4",{className:`text-lg font-semibold ${a.title} line-clamp-1`,children:t.organization})})]})})}),e.jsx("div",{className:"space-y-3",children:e.jsx("p",{className:"text-gray-900 font-medium text-lg line-clamp-2",children:t.title})}),e.jsx("div",{className:"flex gap-3 pt-2",children:e.jsx("button",{id:`btn_${t._id}`,className:`flex-1 px-4 py-2.5 rounded-lg text-white font-medium transition-all duration-200 
                ${a.button} hover:shadow-lg active:scale-98 flex items-center justify-center gap-2`,onClick:()=>R(t._id),children:e.jsx("span",{children:"View Annual Calendar"})})}),e.jsx("div",{id:`calendar_${t._id}`,className:"hidden",children:e.jsx(K,{organizationId:t._id})})]})]})},D=[{id:"all",label:"All Updates",icon:W},{id:"documents",label:"Documents",icon:w},{id:"updates",label:"Updates",icon:N},{id:"calendar",label:"Annual calendar",icon:f}];return e.jsxs(e.Fragment,{children:[e.jsxs(H,{children:[e.jsx("title",{children:"Overview | gyapak"}),e.jsx("meta",{name:"description",content:"Comprehensive overview of all government exam updates, documents, notifications and schedules."}),e.jsx("meta",{name:"keywords",content:"government exams, updates, notifications, documents, schedules, government jobs"}),e.jsx("meta",{property:"og:title",content:"Overview | gyapak"}),e.jsx("meta",{property:"og:description",content:"Find all the latest updates on government exams, documents, and schedules for central and state government jobs."})]}),e.jsx("div",{className:"min-h-screen bg-gray-50/50",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 pt-32 space-y-6",children:[e.jsx(Q,{}),e.jsxs("div",{className:"bg-white shadow-md rounded-lg overflow-hidden p-6",children:[e.jsx("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-6 mb-8",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"bg-indigo-100 p-2 rounded-lg",children:e.jsx(j,{className:"h-6 w-6 text-indigo-600"})}),e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-indigo-600 to-purple-600",children:"All Updates"})]}),e.jsx("p",{className:"text-gray-600 text-sm sm:text-base",children:"Your complete overview of all notifications, documents and schedules"})]})}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-3 flex items-center pointer-events-none",children:e.jsx(v,{className:"h-4 w-4 text-gray-400"})}),e.jsx("input",{type:"text",placeholder:"Search by organization or title...",className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white placeholder-gray-400",value:i,onChange:t=>S(t.target.value)})]}),e.jsxs("select",{className:"w-full md:w-[220px] px-4 py-3 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white cursor-pointer",value:d,onChange:t=>k(t.target.value),children:[e.jsx("option",{value:"all",children:"All Organizations"}),$.map(t=>e.jsx("option",{value:t,children:t},t))]})]})]}),e.jsxs("div",{className:"bg-white shadow-md rounded-lg overflow-hidden p-6",children:[e.jsx("div",{className:"flex flex-wrap gap-2 mb-8 border-b",children:D.map(t=>e.jsxs("button",{onClick:()=>E(t.id),className:`flex items-center gap-2 px-4 py-3 font-medium transition-all duration-200 relative
                  ${c===t.id?"text-indigo-800 border-b-2 border-indigo-600":"text-gray-600 hover:text-gray-900"}`,children:[e.jsx(t.icon,{className:"h-4 w-4"}),t.label]},t.id))}),_?e.jsx("div",{className:"flex justify-center items-center p-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-indigo-500"})}):b.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:b.map((t,a)=>e.jsx(L,{item:t},t._id||`update-${a}`))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"mx-auto h-16 w-16 bg-gray-100 flex items-center justify-center rounded-full mb-4",children:e.jsx(v,{className:"h-8 w-8 text-gray-400"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"No updates found"}),e.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Try adjusting your search or filter criteria"})]})]})]})})]})},Y={headerBg:"bg-gradient-to-r from-indigo-500 to-purple-600",icon:"text-indigo-600",iconBg:"bg-indigo-50",iconRing:"ring-indigo-100",title:"text-indigo-900",typeBadge:"bg-indigo-50 text-indigo-700",dateText:"text-indigo-700",button:"bg-indigo-600 hover:bg-indigo-700",notificationActive:"bg-indigo-50"},G={headerBg:"bg-gradient-to-r from-emerald-500 to-green-600",icon:"text-emerald-600",iconBg:"bg-emerald-50",iconRing:"ring-emerald-100",title:"text-emerald-900",typeBadge:"bg-emerald-50 text-emerald-700",dateText:"text-emerald-700",button:"bg-emerald-600 hover:bg-emerald-700",notificationActive:"bg-emerald-50"},J={headerBg:"bg-gradient-to-r from-sky-500 to-blue-600",icon:"text-sky-600",iconBg:"bg-sky-50",iconRing:"ring-sky-100",title:"text-sky-900",typeBadge:"bg-sky-50 text-sky-700",dateText:"text-sky-700",button:"bg-sky-600 hover:bg-sky-700",notificationActive:"bg-sky-50"},X={headerBg:"bg-gradient-to-r from-amber-500 to-orange-600",icon:"text-amber-600",iconBg:"bg-amber-50",iconRing:"ring-amber-100",title:"text-amber-900",typeBadge:"bg-amber-50 text-amber-700",dateText:"text-amber-700",button:"bg-amber-600 hover:bg-amber-700",notificationActive:"bg-amber-50"};export{xe as default};
