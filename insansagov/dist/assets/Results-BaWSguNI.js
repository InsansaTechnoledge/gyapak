import{a as v,r as l,u as y,j as s,b as u,c as m}from"./index-Blcj_2Q4.js";import{u as p}from"./useQuery-Cm-XwrIp.js";import{u as w}from"./useEventRouting-Bf7LmZwF.js";import{F as R}from"./filter-CPbvYh2T.js";import{B as F}from"./building-2-DYEyMo_t.js";import{C as O}from"./calendar-DSVHOJ-8.js";import"./pdf.worker-D6-XlEtG.js";import"./urlUtils.utils-BjqSc7UL.js";const K=()=>{const{apiBaseUrl:r,setApiBaseUrl:i,setServerError:d}=v(),[T,C]=l.useState(""),[a,h]=l.useState("All");y();const[c,x]=l.useState(),{getEventHref:f,handleEventClick:g,prefetchEventRoute:N}=w({fallback:"old"}),b=async()=>{try{const e=await u.get(`${r}/api/result`);if(e.status===201)return e.data}catch(e){if(e.response||e.request)if(e.response&&e.response.status>=500&&e.response.status<600||e.code==="ECONNREFUSED"||e.code==="ETIMEDOUT"||e.code==="ENOTFOUND"||e.code==="ERR_NETWORK"){const t=await m();i(t),d(e.response.status)}else console.error("Error fetching state count:",e);else console.error("Error fetching state count:",e)}},E=async()=>{try{const e=await u.get(`${r}/api/category/getcategories`);if(e.status===201){const t=e.data.map(j=>j.category);return t.unshift("All"),t}}catch(e){if(e.response||e.request)if(e.response&&e.response.status>=500&&e.response.status<600||e.code==="ECONNREFUSED"||e.code==="ETIMEDOUT"||e.code==="ENOTFOUND"||e.code==="ERR_NETWORK"){const t=await m();i(t),d(e.response.status)}else console.error("Error fetching state count:",e);else console.error("Error fetching state count:",e)}},{data:o,isLoading1:D}=p({queryKey:["rdcategories",r],queryFn:E,staleTime:1/0,cacheTime:24*60*60*1e3,refetchOnMount:!0,refetchOnWindowFocus:!1}),{data:n,isLoading2:S}=p({queryKey:["rdresults",r],queryFn:b,staleTime:1/0,cacheTime:24*60*60*1e3,refetchOnMount:!0,refetchOnWindowFocus:!1});return l.useEffect(()=>{o&&n&&x(Array.isArray(n)?n.filter(e=>a==="All"||e.category===a):[])},[o,n,a]),s.jsxs("div",{className:"bg-gradient-to-br from-purple-100 to-white shadow-md rounded-lg p-6 mt-10 mb-10",children:[s.jsxs("div",{className:"flex flex-col xl:flex-row space-y-4 justify-between items-center mb-6",children:[s.jsxs("div",{className:"flex flex-col",children:[s.jsx("h2",{className:"text-center xl:text-left text-2xl font-bold text-purple-800",children:"Latest Results government results 2025"}),s.jsx("p",{className:"text-center text-purple-700 mt-1",children:"Check out the latest examination results"})]}),s.jsxs("div",{className:"relative",children:[s.jsx(R,{className:"absolute left-3 top-2.5 h-5 w-5 text-gray-400"}),s.jsx("select",{className:"pl-10 h-10 rounded-md border border-gray-300 focus:ring-2 focus:ring-purple-600 focus:border-transparent bg-white text-sm",value:a,onChange:e=>h(e.target.value),children:o&&o.map(e=>s.jsx("option",{value:e,children:e},e))})]})]}),c&&c.length>0?s.jsx("div",{className:"space-y-6",children:s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:c.slice(0,3).map(e=>s.jsxs("div",{className:"relative bg-white rounded-xl shadow-sm hover:shadow-md transition-all duration-300 p-4 border border-purple-200 flex flex-col justify-between",children:[s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-semibold mb-2 flex items-center gap-2 text-purple-800",children:[s.jsx(F,{className:"h-5 w-5"}),e.abbreviation]}),s.jsx("p",{className:"font-medium text-gray-800 mb-2",children:e.name}),s.jsxs("div",{className:"text-sm text-gray-600",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx(O,{className:"h-4 w-4"}),"Published:"," ",new Date(e.date_of_notification).toLocaleDateString()]}),s.jsx("span",{className:"inline-block mt-2 px-2 py-1 rounded-full text-xs bg-green-100 text-green-800",children:"ACTIVE"})]})]}),s.jsx("div",{children:s.jsx("a",{href:f(e),onMouseEnter:()=>N(e),onClick:t=>g(t,e),rel:"noopener noreferrer",className:"block mt-4 px-4 py-2 bg-purple-700 text-white text-center rounded-md hover:bg-purple-800 transition-colors",children:"View Result"})})]},e._id))})}):s.jsx("div",{className:"text-center py-8",children:s.jsx("p",{className:"text-gray-500",children:"No results found."})})]})};export{K as default};
