import{u as b,r as c,b as v,j as s,e as d,C as u}from"./index-CZYuCXHJ.js";import{u as x}from"./useQuery-elcSJ7jO.js";import{B as w}from"./building-2-DfC8jgKK.js";import{C as E}from"./calendar-CvR1lCF7.js";import{E as L}from"./external-link-4Qyika27.js";import{A as O}from"./arrow-right-CgDwgZ9A.js";import"./pdf.worker-D6-XlEtG.js";const _=()=>{const{apiBaseUrl:r,setApiBaseUrl:p,setServerError:m}=b(),[a,f]=c.useState("All"),h=v(),[o,g]=c.useState(),N=async()=>{try{const[e,t]=await Promise.all([d.get(`${r}/api/admitCard/`),d.get(`${r}/api/result/`)]);if(e.status===201&&t.status===201){const l=[...e.data,...t.data];return console.log(l),l}return[]}catch(e){if(console.error("Error fetching important links:",e),e.response||e.request)if(e.response&&e.response.status>=500&&e.response.status<600||e.code==="ECONNREFUSED"||e.code==="ETIMEDOUT"||e.code==="ENOTFOUND"||e.code==="ERR_NETWORK"){const t=await u();p(t),m(e.response.status)}else console.error("Error fetching state count:",e);else console.error("Error fetching state count:",e)}},{data:n,isLoading1:A}=x({queryKey:["importantLinksDashboard",r],queryFn:N,staleTime:1/0,cacheTime:24*60*60*1e3,refetchOnMount:!0,refetchOnWindowFocus:!1}),y=async()=>{try{const e=await d.get(`${r}/api/category/getcategories`);if(e.status===201){const t=e.data.map(l=>l.category);return t.unshift("All"),t}}catch(e){if(e.response||e.request)if(e.response&&e.response.status>=500&&e.response.status<600||e.code==="ECONNREFUSED"||e.code==="ETIMEDOUT"||e.code==="ENOTFOUND"||e.code==="ERR_NETWORK"){const t=await u();p(t),m(e.response.status)}else console.error("Error fetching state count:",e);else console.error("Error fetching state count:",e)}},{data:i,isLoading2:F}=x({queryKey:["importanLinksCategory",r],queryFn:y,staleTime:1/0,cacheTime:24*60*60*1e3,refetchOnMount:!0,refetchOnWindowFocus:!1});c.useEffect(()=>{i&&n&&g(Array.isArray(n)?n.filter(e=>a==="All"||e.category===a):[])},[i,n,a]);const j=()=>{h("/overview")};return s.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-white shadow-md rounded-lg p-6 mt-10 mb-10",children:[s.jsxs("div",{className:"flex flex-col space-y-4 md:flex-row justify-between items-center mb-6",children:[s.jsxs("div",{className:"flex flex-col",children:[s.jsx("h2",{className:"text-2xl font-bold text-purple-900",children:"Exam's Important Links"}),s.jsx("p",{className:"text-purple-600 mt-1",children:"Find all examination resources in one place"})]}),s.jsx("div",{className:"flex items-center gap-4",children:s.jsx("select",{className:"h-9 rounded-full px-4 pr-8 border border-purple-200 focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white text-sm",value:a,onChange:e=>f(e.target.value),children:i&&i.map(e=>s.jsx("option",{value:e,children:e},e))})})]}),o&&o.length>0?s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:o.slice(0,3).map(e=>s.jsxs("div",{className:"relative bg-white rounded-xl shadow-sm hover:shadow-md transition-all duration-300 p-4 border border-purple-200 flex flex-col justify-between",children:[s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-semibold mb-2 flex items-center gap-2 text-purple-800",children:[s.jsx(w,{className:"h-5 w-5"}),e.abbreviation]}),s.jsx("p",{className:"font-medium text-gray-800 mb-2",children:e.examName}),s.jsxs("div",{className:"text-sm text-gray-600",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx(E,{className:"h-4 w-4"}),"Updated: ",new Date(e.date_of_notification).toLocaleDateString()]}),s.jsx("span",{className:`inline-block mt-2 px-2 py-1 rounded-full text-xs ${e.status==="Active"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:e.status||"ACTIVE"})]})]}),s.jsx("div",{className:"mt-4 space-y-2",children:e.apply_link&&s.jsxs("a",{href:e.apply_link,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-between px-3 py-2 bg-purple-50 text-purple-700 rounded-md hover:bg-purple-100 transition-colors",children:[s.jsx("span",{children:"view details"}),s.jsx(L,{className:"h-4 w-4"})]})})]},e._id))}),o.length>3&&s.jsxs("button",{onClick:j,className:"w-full mt-6 flex items-center justify-center gap-2 text-purple-700 hover:text-purple-900 font-medium transition-colors duration-200",children:["View All Important Links",s.jsx(O,{className:"h-4 w-4"})]})]}):s.jsx("div",{className:"text-center py-8",children:s.jsx("p",{className:"text-gray-500",children:"No important links available for this category."})})]})};export{_ as default};
