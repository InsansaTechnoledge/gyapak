import{e as X,r as a,j as e,L as Y,O as K,b as ee}from"./index-Blcj_2Q4.js";import{T as te}from"./triangle-alert-CUVnlb6z.js";import{E as G}from"./external-link-BZY8wFBn.js";import{S as se}from"./share-2-Bbdk6CQI.js";import{C as ae}from"./chevron-down-BXJ8AVX1.js";import{F as le}from"./filter-CPbvYh2T.js";import{X as re}from"./x-Bgq7tSLC.js";import"./pdf.worker-D6-XlEtG.js";/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=X("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=X("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);function T(s){try{const l=new URL(s);if(!l.hostname.replace("www.","").includes("drive.google.com"))return null;const o=l.pathname||"",n=l.searchParams.get("id");let m=null;const h=o.match(/\/file\/d\/([^/]+)/);return h&&h[1]&&(m=h[1]),!m&&n&&(m=n),m?`https://drive.google.com/file/d/${m}/preview`:null}catch{return null}}function oe(s){try{const l=new URL(s);if(!l.hostname.replace("www.","").includes("drive.google.com"))return null;const o=l.pathname.match(/\/file\/d\/([^/]+)/);if(o&&o[1])return o[1];const n=l.searchParams.get("id");return n||null}catch{return null}}function ce(s){const l=oe(s);return l?`https://drive.google.com/uc?export=download&id=${l}`:null}function P(s){return/\.pdf(\?|$)/i.test(s)}function I(s,l){return`${window.location.origin}/daily-updates`}function de(s,l="Daily Update"){const c=I(),o=encodeURIComponent(c),n=encodeURIComponent(`${l}
${c}`);return{websiteUrl:c,whatsapp:`https://wa.me/?text=${n}`,telegram:`https://t.me/share/url?url=${o}&text=${encodeURIComponent(l)}`,twitter:`https://twitter.com/intent/tweet?url=${o}&text=${encodeURIComponent(l)}`}}const A=({onClick:s,children:l,title:c,className:o=""})=>e.jsx("button",{type:"button",onClick:s,title:c,className:`p-1.5 sm:p-2 rounded-full bg-white/95 hover:bg-white shadow-md hover:shadow-lg ring-1 ring-black/5 transition-all duration-200 hover:scale-105 active:scale-95 ${o}`,children:l}),me=({className:s=""})=>e.jsxs("div",{className:["pointer-events-none select-none","flex items-center gap-1.5 sm:gap-2","px-2.5 sm:px-3 py-1 rounded-full","bg-neutral-900/80 text-white ring-1 ring-white/15 backdrop-blur-sm","shadow-md","animate-bounce-slow",s].join(" "),children:[e.jsx("span",{className:"hidden sm:inline font-medium tracking-wide text-xs sm:text-sm",children:"Scroll"}),e.jsx("div",{className:"flex -space-y-2",children:e.jsx(ae,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4 opacity-70"})})]}),xe=({item:s,isLast:l,minH:c})=>{const[o,n]=a.useState(!1),m=a.useRef(null),[h,E]=a.useState(!1),g=(s?.description??"").trim(),C=25,u=g.length>C,b=h?g:g.slice(0,C),i=a.useMemo(()=>{const r=T(s.pdfLink);return r||(P(s.pdfLink)?s.pdfLink:null)},[s.pdfLink]);a.useEffect(()=>{const r=m.current;if(!r)return;const d=S=>S.stopPropagation();return r.addEventListener("wheel",d,{passive:!1}),r.addEventListener("touchmove",d,{passive:!1}),()=>{r.removeEventListener("wheel",d),r.removeEventListener("touchmove",d)}},[i]);const y=a.useCallback(async()=>{const r=I(s.id,s.title),d={title:s.title||"Daily Update",text:s.title||"Daily Update",url:r};if(navigator.share)try{await navigator.share(d);return}catch{}},[s.id,s.title]),w=async()=>{try{const r=I(s.id,s.title);await navigator.clipboard.writeText(r),n(!0),setTimeout(()=>n(!1),1200)}catch{n(!1)}},j=()=>{const r=ce(s.pdfLink),d=P(s.pdfLink),S=r||(d?s.pdfLink:null);if(!S){window.open(s.pdfLink,"_blank","noopener,noreferrer");return}const f=document.createElement("a");f.href=S,f.target="_blank";const $=(s.title||"daily-update").replace(/[^\w.-]+/g,"_")+".pdf";r||f.setAttribute("download",$),document.body.appendChild(f),f.click(),document.body.removeChild(f)},{whatsapp:v,telegram:N,twitter:k}=a.useMemo(()=>de(s.id,s.title),[s.id,s.title]);return e.jsxs("section",{className:"w-full snap-start relative flex items-center justify-center px-2 sm:px-3 md:px-4 py-4 sm:py-6 md:py-8 lg:py-10",style:{minHeight:c},children:[e.jsxs("div",{className:"relative mx-auto rounded-xl sm:rounded-2xl overflow-hidden shadow-[0_8px_32px_rgba(0,0,0,0.24)] sm:shadow-[0_12px_48px_rgba(0,0,0,0.28)] ring-1 ring-black/10 bg-neutral-950 w-full max-w-[96vw] sm:max-w-[90vw] md:max-w-[640px] lg:max-w-[720px]",style:{height:`calc(${c} - 2rem)`,aspectRatio:"9 / 16",maxHeight:"85vh"},children:[e.jsx("div",{className:"absolute inset-0 grid place-items-center pointer-events-none z-10 bg-black/10",children:e.jsx(Y,{className:`h-8 w-8 sm:h-10 sm:w-10 animate-spin text-white transition-opacity duration-300 ${i?"opacity-0":"opacity-100"}`})}),i&&T(s.pdfLink)&&e.jsx("div",{ref:m,className:"h-full w-full overflow-auto",children:e.jsx("iframe",{src:i,title:s.title||"Daily Update",className:"h-full w-full min-h-full",allow:"autoplay; fullscreen",style:{pointerEvents:"auto"}})}),i&&P(i)&&!T(s.pdfLink)&&e.jsx("div",{ref:m,className:"h-full w-full overflow-auto",children:e.jsx("object",{data:i,type:"application/pdf",className:"h-full w-full min-h-full",style:{pointerEvents:"auto"},children:e.jsx("iframe",{src:`https://docs.google.com/viewer?url=${encodeURIComponent(i)}&embedded=true`,className:"h-full w-full",title:s.title||"Daily Update",style:{pointerEvents:"auto"}})})}),!i&&e.jsxs("div",{className:"h-full w-full flex flex-col items-center justify-center gap-4 sm:gap-6 p-4 sm:p-8 bg-gradient-to-br from-neutral-900 to-neutral-800",children:[e.jsx("div",{className:"bg-amber-500/10 p-3 sm:p-4 rounded-xl sm:rounded-2xl ring-1 ring-amber-500/20",children:e.jsx(te,{className:"h-8 w-8 sm:h-10 sm:w-10 text-amber-400"})}),e.jsxs("div",{className:"text-center space-y-2 sm:space-y-3",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-semibold text-white",children:"Preview Not Available"}),e.jsx("p",{className:"text-white/70 text-xs sm:text-sm px-4 leading-relaxed",children:"This content can't be displayed here. Open it in a new tab."})]}),e.jsxs("a",{href:s.pdfLink,target:"_blank",rel:"noreferrer",className:"px-5 sm:px-6 py-2.5 sm:py-3 rounded-full bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white text-sm sm:text-base font-medium inline-flex items-center gap-2 sm:gap-2.5 shadow-lg hover:shadow-xl transition-all duration-200 hover:scale-105 active:scale-95",children:[e.jsx(G,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"}),"Open Link"]})]}),e.jsx("div",{className:"absolute inset-x-0 bottom-0 p-2 sm:p-3 z-20",children:e.jsxs("div",{className:"rounded-lg sm:rounded-xl bg-black/80 backdrop-blur-md px-3 sm:px-4 py-2.5 sm:py-3 ring-1 ring-white/10 shadow-xl",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2 sm:gap-3 mb-2 sm:mb-3",children:[e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h2",{className:"text-base sm:text-lg md:text-xl font-bold leading-tight text-white mb-0.5",children:s.title||"Daily Update"}),s.date&&e.jsx("p",{className:"text-xs sm:text-sm text-white/70 font-medium",children:new Date(s.date).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}),s?.description&&e.jsxs("div",{className:"mt-2 sm:mt-4",children:[e.jsx("p",{className:"text-xs sm:text-sm md:text-base font-medium leading-snug text-white/80",children:g?e.jsxs(e.Fragment,{children:[b,!h&&u&&"…"]}):"Daily Update"}),u&&e.jsx("button",{type:"button",onClick:()=>E(r=>!r),className:"mt-1 text-blue-400 hover:text-blue-500 underline underline-offset-2 text-xs sm:text-sm","aria-expanded":h,children:h?"Read less":"Read more"})]})]}),e.jsxs("div",{className:"flex items-center gap-1 sm:gap-1.5",children:[e.jsx(A,{title:"Download PDF",onClick:j,children:e.jsx(K,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4 text-slate-700"})}),e.jsx(A,{title:"Open in new tab",onClick:()=>window.open(s.pdfLink,"_blank"),children:e.jsx(G,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4 text-slate-700"})}),e.jsx(A,{title:"Share",onClick:y,children:e.jsx(se,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4 text-slate-700"})})]})]}),e.jsxs("div",{className:"flex items-center pb-4 sm:pb-6 mb-1 sm:mb-2 flex-wrap gap-1 sm:gap-1.5",children:[e.jsx("a",{href:v,target:"_blank",rel:"noreferrer",className:"px-2.5 sm:px-3 py-1 sm:py-1.5 rounded-full bg-white/95 hover:bg-white text-slate-800 text-xs font-medium shadow-md hover:shadow-lg transition-all duration-200 hover:scale-105 active:scale-95 ring-1 ring-black/5",children:"WhatsApp"}),e.jsx("a",{href:N,target:"_blank",rel:"noreferrer",className:"px-2.5 sm:px-3 py-1 sm:py-1.5 rounded-full bg-white/95 hover:bg-white text-slate-800 text-xs font-medium shadow-md hover:shadow-lg transition-all duration-200 hover:scale-105 active:scale-95 ring-1 ring-black/5",children:"Telegram"}),e.jsx(A,{title:"Copy link",onClick:w,className:"bg-white/95 hover:bg-white",children:o?e.jsx(ne,{className:"h-3 w-3 sm:h-3.5 sm:w-3.5 text-green-600"}):e.jsx(ie,{className:"h-3 w-3 sm:h-3.5 sm:w-3.5 text-slate-700"})})]})]})})]}),!l&&e.jsx(me,{className:"absolute bottom-2 sm:bottom-4 left-1/2 -translate-x-1/2 z-30"})]})},pe="https://adminpanel.gyapak.in/api/v1i2/affair",he=["Current Affairs","Editorial","MCQs","Monthly Summary"];function Ne(){const s=a.useRef(null),l=a.useRef(null),[c,o]=a.useState(0),[n,m]=a.useState([]),[h,E]=a.useState(""),[g,C]=a.useState(!0),[u,b]=a.useState(""),[i,y]=a.useState(""),[w,j]=a.useState(""),[v,N]=a.useState(""),[k,r]=a.useState(""),[d,S]=a.useState(""),[f,$]=a.useState(""),[L,M]=a.useState(""),[U,x]=a.useState(1),[D,H]=a.useState(10),[R,z]=a.useState("-date"),[F,Z]=a.useState(!1),[Q,O]=a.useState(!1);a.useEffect(()=>{const t=()=>o(l.current?.offsetHeight||0);t();const p=new ResizeObserver(t);return l.current&&p.observe(l.current),window.addEventListener("resize",t),()=>{window.removeEventListener("resize",t),p.disconnect()}},[]);const V=`calc(100vh - ${c}px)`,_=a.useMemo(()=>{const t=new URLSearchParams;return u&&t.set("date",u),i&&t.set("from",i),w&&t.set("to",w),v&&t.set("month",v),k&&t.set("year",k),d&&t.set("category",d),f&&t.set("published",f),L.trim()&&t.set("search",L.trim()),U&&t.set("page",String(U)),D&&t.set("limit",String(D)),R&&t.set("sort",R),t.toString()},[u,i,w,v,k,d,f,L,U,D,R]);a.useEffect(()=>{let t=!1;const p=new AbortController;return(async()=>{try{C(!0),E("");const B=`${pe}/get-pdf${_?`?${_}`:""}`,W=await ee.get(B,{signal:p.signal}),q=W?.data?.data??W?.data??[];t||m(Array.isArray(q)?q:[])}catch{t||(E("Could not load daily updates."),m([]))}finally{t||C(!1)}})(),()=>{t=!0,p.abort()}},[_]),a.useEffect(()=>{O(!0);const t=setTimeout(()=>O(!1),300);return()=>clearTimeout(t)},[L]);const J=()=>{b(""),y(""),j(""),N(""),r(""),S(""),$(""),M(""),x(1),H(10),z("-date")};return e.jsxs("div",{className:"min-h-screen w-full mt-10 bg-white",children:[e.jsx("header",{ref:l,className:"bg-white sticky top-0 z-40 pt-8 sm:pt-10 border-b border-gray-100",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pb-4",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsxs("div",{className:"flex-1 mt-16 md:mt-20 text-center md:text-left",children:[e.jsxs("h1",{className:"text-4xl sm:text-5xl font-bold text-purple-800 mb-3 relative inline-block",children:[e.jsx("span",{className:"relative z-10",children:"Gyapak's Daily Updates in Hindi"}),e.jsx("span",{className:"absolute -bottom-2 left-0 w-full h-2 bg-purple-200 transform -rotate-1 rounded z-0"})]}),e.jsxs("p",{className:"text-base sm:text-lg text-gray-600 mt-1 max-w-xl mx-auto md:mx-0",children:["Curated insights from"," ",e.jsxs("span",{className:"text-purple-700 font-semibold",children:["gyapak (",g?"…":n.length,")"]}),Q?e.jsx("span",{className:"ml-2 text-xs text-gray-400",children:"typing…"}):null]})]}),e.jsxs("button",{type:"button",onClick:()=>Z(t=>!t),className:"inline-flex items-center gap-2 self-center md:self-auto px-3 py-2 rounded-lg border border-purple-200 text-purple-700 hover:bg-purple-50",children:[e.jsx(le,{className:"h-4 w-4"}),F?"Hide filters":"Show filters"]})]}),F&&e.jsxs("div",{className:"mt-6 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 xl:grid-cols-6 gap-3",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"text-xs text-gray-500 mb-1",children:"Date (single)"}),e.jsx("input",{type:"date",value:u,onChange:t=>{b(t.target.value),y(""),j(""),N(""),r(""),x(1)},className:"border rounded-lg px-3 py-2"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"text-xs text-gray-500 mb-1",children:"From"}),e.jsx("input",{type:"date",value:i,onChange:t=>{u&&b(""),(v||k)&&(N(""),r("")),y(t.target.value),x(1)},className:"border rounded-lg px-3 py-2"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"text-xs text-gray-500 mb-1",children:"To"}),e.jsx("input",{type:"date",value:w,onChange:t=>{u&&b(""),(v||k)&&(N(""),r("")),j(t.target.value),x(1)},className:"border rounded-lg px-3 py-2"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"text-xs text-gray-500 mb-1",children:"Month"}),e.jsxs("select",{value:v,onChange:t=>{u&&b(""),(i||w)&&(y(""),j("")),N(t.target.value),x(1)},className:"border rounded-lg px-3 py-2",children:[e.jsx("option",{value:"",children:"Any"}),Array.from({length:12},(t,p)=>e.jsx("option",{value:String(p+1),children:p+1},p+1))]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"text-xs text-gray-500 mb-1",children:"Year"}),e.jsx("input",{type:"number",placeholder:"2025",value:k,onChange:t=>{u&&b(""),(i||w)&&(y(""),j("")),r(t.target.value),x(1)},className:"border rounded-lg px-3 py-2"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"text-xs text-gray-500 mb-1",children:"Category"}),e.jsxs("select",{value:d,onChange:t=>{S(t.target.value),x(1)},className:"border rounded-lg px-3 py-2",children:[e.jsx("option",{value:"",children:"All"}),he.map(t=>e.jsx("option",{value:t,children:t},t))]})]}),e.jsxs("div",{className:"flex flex-col sm:col-span-2 xl:col-span-2",children:[e.jsx("label",{className:"text-xs text-gray-500 mb-1",children:"Search"}),e.jsx("input",{type:"text",placeholder:"title or description…",value:L,onChange:t=>{M(t.target.value),x(1)},className:"border rounded-lg px-3 py-2"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"text-xs text-gray-500 mb-1",children:"Sort"}),e.jsxs("select",{value:R,onChange:t=>{z(t.target.value),x(1)},className:"border rounded-lg px-3 py-2",children:[e.jsx("option",{value:"-date",children:"Newest first"}),e.jsx("option",{value:"date",children:"Oldest first"}),e.jsx("option",{value:"title",children:"Title A→Z"}),e.jsx("option",{value:"-title",children:"Title Z→A"})]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"text-xs text-gray-500 mb-1",children:"Per page"}),e.jsx("select",{value:D,onChange:t=>{H(Number(t.target.value)),x(1)},className:"border rounded-lg px-3 py-2",children:[10,20,30,50].map(t=>e.jsx("option",{value:t,children:t},t))})]}),e.jsx("div",{className:"flex items-end gap-2",children:e.jsxs("button",{type:"button",onClick:J,className:"px-3 py-2 rounded-lg border text-gray-700 border-gray-200 hover:bg-gray-50 inline-flex items-center gap-1",children:[e.jsx(re,{className:"h-4 w-4"})," Clear all"]})})]})]})}),h&&e.jsxs("div",{className:"sticky top-[var(--headerH,0px)] z-30 p-3 sm:p-4 bg-amber-50 text-amber-800 text-sm border-y border-amber-200",children:["⚠️ ",h]}),e.jsxs("main",{ref:s,className:"w-full overflow-y-auto snap-y snap-mandatory",style:{overscrollBehavior:"contain"},children:[g?e.jsx("div",{className:"min-h-[50vh] grid place-items-center",children:e.jsxs("div",{className:"flex items-center gap-3 text-purple-700",children:[e.jsx(Y,{className:"h-6 w-6 animate-spin"}),e.jsx("span",{className:"font-medium",children:"Loading updates…"})]})}):n.length===0?e.jsx("div",{className:"min-h-[40vh] grid place-items-center text-gray-500",children:"No updates found for the selected filters."}):n.map((t,p)=>e.jsx(xe,{item:t,isLast:p===n.length-1,minH:V},t._id||t.id||p)),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 flex items-center justify-between",children:[e.jsx("button",{disabled:U<=1||g,onClick:()=>x(t=>Math.max(1,t-1)),className:"px-3 py-2 rounded-lg border border-gray-200 disabled:opacity-50",children:"Previous"}),e.jsxs("div",{className:"text-sm text-gray-600",children:["Page ",U]}),e.jsx("button",{disabled:g||n.length<Number(D),onClick:()=>x(t=>t+1),className:"px-3 py-2 rounded-lg border border-gray-200 disabled:opacity-50",children:"Next"})]})]})]})}export{Ne as default};
