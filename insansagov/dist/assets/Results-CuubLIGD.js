import{a as w,r as i,u as v,j as s,b as u,C as m}from"./index-CJVk7EkQ.js";import{u as p}from"./useQuery-B1jNOKxB.js";import{F as E}from"./filter-BIJ69wC_.js";import{B as R}from"./building-2-D22bYjXx.js";import{C as F}from"./calendar-l_oLAoGj.js";import{A as O}from"./arrow-right-D3xeRLpj.js";import"./pdf.worker-D6-XlEtG.js";const B=()=>{const{apiBaseUrl:a,setApiBaseUrl:c,setServerError:d}=w(),[T,A]=i.useState(""),[o,x]=i.useState("All"),h=v(),[r,f]=i.useState(),g=async()=>{try{const e=await u.get(`${a}/api/result`);if(e.status===201)return e.data}catch(e){if(e.response||e.request)if(e.response&&e.response.status>=500&&e.response.status<600||e.code==="ECONNREFUSED"||e.code==="ETIMEDOUT"||e.code==="ENOTFOUND"||e.code==="ERR_NETWORK"){const t=await m();c(t),d(e.response.status)}else console.error("Error fetching state count:",e);else console.error("Error fetching state count:",e)}},N=async()=>{try{const e=await u.get(`${a}/api/category/getcategories`);if(e.status===201){const t=e.data.map(y=>y.category);return t.unshift("All"),t}}catch(e){if(e.response||e.request)if(e.response&&e.response.status>=500&&e.response.status<600||e.code==="ECONNREFUSED"||e.code==="ETIMEDOUT"||e.code==="ENOTFOUND"||e.code==="ERR_NETWORK"){const t=await m();c(t),d(e.response.status)}else console.error("Error fetching state count:",e);else console.error("Error fetching state count:",e)}},{data:l,isLoading1:C}=p({queryKey:["rdcategories",a],queryFn:N,staleTime:1/0,cacheTime:24*60*60*1e3,refetchOnMount:!0,refetchOnWindowFocus:!1}),{data:n,isLoading2:D}=p({queryKey:["rdresults",a],queryFn:g,staleTime:1/0,cacheTime:24*60*60*1e3,refetchOnMount:!0,refetchOnWindowFocus:!1});i.useEffect(()=>{l&&n&&f(Array.isArray(n)?n.filter(e=>o==="All"||e.category===o):[])},[l,n,o]);const b=()=>{h("/results")},j=e=>e.toLowerCase().replace(/[^\w\s]/g,"").replace(/\s+/g,"-");return s.jsxs("div",{className:"bg-gradient-to-br from-purple-100 to-white shadow-md rounded-lg p-6 mt-10 mb-10",children:[s.jsxs("div",{className:"flex flex-col xl:flex-row space-y-4 justify-between items-center mb-6",children:[s.jsxs("div",{className:"flex flex-col",children:[s.jsx("h2",{className:"text-center xl:text-left text-2xl font-bold text-purple-800",children:"Latest Results"}),s.jsx("p",{className:"text-center text-purple-700 mt-1",children:"Check out the latest examination results"})]}),s.jsxs("div",{className:"relative",children:[s.jsx(E,{className:"absolute left-3 top-2.5 h-5 w-5 text-gray-400"}),s.jsx("select",{className:"pl-10 h-10 rounded-md border border-gray-300 focus:ring-2 focus:ring-purple-600 focus:border-transparent bg-white text-sm",value:o,onChange:e=>x(e.target.value),children:l&&l.map(e=>s.jsx("option",{value:e,children:e},e))})]})]}),r&&r.length>0?s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:r.slice(0,3).map(e=>s.jsxs("div",{className:"relative bg-white rounded-xl shadow-sm hover:shadow-md transition-all duration-300 p-4 border border-purple-200 flex flex-col justify-between",children:[s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-semibold mb-2 flex items-center gap-2 text-purple-800",children:[s.jsx(R,{className:"h-5 w-5"}),e.abbreviation]}),s.jsx("p",{className:"font-medium text-gray-800 mb-2",children:e.name}),s.jsxs("div",{className:"text-sm text-gray-600",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx(F,{className:"h-4 w-4"}),"Published: ",new Date(e.date_of_notification).toLocaleDateString()]}),s.jsx("span",{className:"inline-block mt-2 px-2 py-1 rounded-full text-xs bg-green-100 text-green-800",children:"ACTIVE"})]})]}),s.jsx("div",{children:s.jsx("a",{href:`/top-exams-for-government-jobs-in-india/${j(e.name)}?id=${e._id}`,target:"_blank",rel:"noopener noreferrer",className:"block mt-4 px-4 py-2 bg-purple-700 text-white text-center rounded-md hover:bg-purple-800 transition-colors",children:"View Result"})})]},e._id))}),r&&r.length>3&&s.jsxs("button",{onClick:b,className:"w-full mt-6 flex items-center justify-center gap-2 text-purple-700 hover:text-purple-800 font-medium transition-colors duration-200",children:["View All Results",s.jsx(O,{className:"h-4 w-4"})]})]}):s.jsx("div",{className:"text-center py-8",children:s.jsx("p",{className:"text-gray-500",children:"No results found."})})]})};export{B as default};
